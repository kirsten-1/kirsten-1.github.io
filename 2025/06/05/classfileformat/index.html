<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="description" content="这里是 Hilda 的个人博客，与你一起发现更大的世界 | 要做一个有 swag 的程序员">
    <meta name="keywords" content="Hilda">
    <meta name="theme-color" content="#000000">

    <!-- Open Graph -->
    <meta property="og:title"
        content="jvm-class文件格式 - Hilda的博客 | Your genius girlfriend's blog">
    
    <meta property="og:type" content="article">
    <meta property="og:description" content="

">
    
    <meta property="article:published_time" content=" 2025-06-05T00:00:00Z">
    
    
    <meta property="article:author" content="Hilda">
    
    
    <meta property="article:tag" content="jvm">
    
    
    <meta property="og:image" content="https://kirsten-1.github.io">
    <meta property="og:url" content="https://kirsten-1.github.io/2025/06/05/classfileformat/">
    <meta property="og:site_name" content="Hilda的博客 | Your genius girlfriend's blog">

    <title>jvm-class文件格式 - Hilda的博客 | Your genius girlfriend's blog</title>

    <!-- Web App Manifest -->
    <link rel="manifest" href="/pwa/manifest.json">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/img/favicon.ico">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://kirsten-1.github.io/2025/06/05/classfileformat/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href=" /css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href=" /css/hux-blog.min.css">

    <!-- Custom Fonts -->
    <!-- <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet"
        type="text/css">


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>

    <!-- Google AdSense -->
    <script data-ad-client="ca-pub-6487568398225121" async
        src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- Navigation -->

    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">Hilda</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div id="huxblog_navbar">
                <div class="navbar-collapse">
                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="/">Home</a>
                        </li>
                        
                        
                        
                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                        
                        
                        <li>
                            <a href="/archive/">Archive</a>
                        </li>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <li class="search-icon">
                            <a href="javascript:void(0)">
                                <i class="fa fa-search"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <script>
        // Drop Bootstarp low-performance Navbar
        // Use customize navbar with high-quality material design animation
        // in high-perf jank-free CSS3 implementation
        var $body = document.body;
        var $toggle = document.querySelector('.navbar-toggle');
        var $navbar = document.querySelector('#huxblog_navbar');
        var $collapse = document.querySelector('.navbar-collapse');

        var __HuxNav__ = {
            close: function () {
                $navbar.className = " ";
                // wait until animation end.
                setTimeout(function () {
                    // prevent frequently toggle
                    if ($navbar.className.indexOf('in') < 0) {
                        $collapse.style.height = "0px"
                    }
                }, 400)
            },
            open: function () {
                $collapse.style.height = "auto"
                $navbar.className += " in";
            }
        }

        // Bind Event
        $toggle.addEventListener('click', function (e) {
            if ($navbar.className.indexOf('in') > 0) {
                __HuxNav__.close()
            } else {
                __HuxNav__.open()
            }
        })

        /**
         * Since Fastclick is used to delegate 'touchstart' globally
         * to hack 300ms delay in iOS by performing a fake 'click',
         * Using 'e.stopPropagation' to stop 'touchstart' event from 
         * $toggle/$collapse will break global delegation.
         * 
         * Instead, we use a 'e.target' filter to prevent handler
         * added to document close HuxNav.  
         *
         * Also, we use 'click' instead of 'touchstart' as compromise
         */
        document.addEventListener('click', function (e) {
            if (e.target == $toggle) return;
            if (e.target.className == 'icon-bar') return;
            __HuxNav__.close();
        })
    </script>
    <!-- Search -->
<div class="search-page">
  <div class="search-icon-close-container">
    <span class="search-icon-close">
      <i class="fa fa-chevron-down"></i>
    </span>
  </div>
  <div class="search-main container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <form></form>
        <input type="text" id="search-input" placeholder="$ grep...">
        </form>
        <div id="search-results" class="mini-post-list"></div>
      </div>
    </div>
  </div>
</div>

    <!-- Image to hack wechat -->
<!-- <img src="/img/icon_wechat.png" width="0" height="0"> -->
<!-- <img src="/img/post-bg-2015.jpg" width="0" height="0"> -->

<!-- Post Header -->



<style type="text/css">
    header.intro-header{
        position: relative;
        background-image: url('/img/post-bg-2015.jpg');
        background: ;
    }

    
</style>




<header class="intro-header" >

    <div class="header-mask"></div>
    
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/archive/?tag=jvm" title="jvm">jvm</a>
                        
                    </div>
                    <h1>jvm-class文件格式</h1>
                    
                    <h2 class="subheading">在学习jvm的各种内容之前应该简单了解下class文件的格式。</h2>
                    <span class="meta">Posted by Hilda on June 5, 2025</span>
                </div>
            </div>
        </div>
    </div>
</header>







<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

    <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <!-- Multi-Lingual -->
                

				<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG">
</script>

<p>官网关于ClassFileFormat（JDK8）：https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html</p>

<hr />

<h1 id="1-一个最简单的案例开始">1 一个最简单的案例开始</h1>

<p>准备一个最简单的java源代码：</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SimpleExample</span> <span class="o">{</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>利用idea的build工具进行编译：</p>

<p><img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250603133759170.png" alt="image-20250603133759170" style="zoom:50%;" /></p>

<p>在<code class="language-plaintext highlighter-rouge">out/production</code>目录中找到<code class="language-plaintext highlighter-rouge">SimpleExample.class</code>字节码文件。</p>

<p>利用javap进行反编译，并且将内容输出为一个txt文件：</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">javap</span> <span class="o">-</span><span class="n">p</span> <span class="o">-</span><span class="n">v</span> <span class="nc">SimpleExample</span><span class="o">.</span><span class="na">class</span> <span class="o">&gt;</span><span class="n">example</span><span class="o">.</span><span class="na">txt</span> 
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">example.txt</code>内容如下：</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
</pre></td><td class="rouge-code"><pre><span class="nc">Classfile</span> <span class="o">/</span><span class="nc">Users</span><span class="o">/</span><span class="n">apple</span><span class="o">/</span><span class="nc">Documents</span><span class="o">/</span><span class="n">study</span><span class="o">/</span><span class="n">JVM_Exer</span><span class="o">/</span><span class="n">out</span><span class="o">/</span><span class="n">production</span><span class="o">/</span><span class="n">E_ClassFileFormat</span><span class="o">/</span><span class="nc">SimpleExample</span><span class="o">.</span><span class="na">class</span>
  <span class="nc">Last</span> <span class="n">modified</span> <span class="mi">2025</span><span class="n">年6月3日</span><span class="o">;</span> <span class="n">size</span> <span class="mi">264</span> <span class="n">bytes</span>
  <span class="no">SHA</span><span class="o">-</span><span class="mi">256</span> <span class="n">checksum</span> <span class="mo">062</span><span class="n">d6c4064cb0c855239a3a067596316804edc006b2232a562e6bdb325ecb5b8</span>
  <span class="nc">Compiled</span> <span class="n">from</span> <span class="s">"SimpleExample.java"</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SimpleExample</span>
  <span class="n">minor</span> <span class="nl">version:</span> <span class="mi">0</span>
  <span class="n">major</span> <span class="nl">version:</span> <span class="mi">52</span>
  <span class="nl">flags:</span> <span class="o">(</span><span class="mh">0x0021</span><span class="o">)</span> <span class="no">ACC_PUBLIC</span><span class="o">,</span> <span class="no">ACC_SUPER</span>
  <span class="nl">this_class:</span> <span class="err">#</span><span class="mi">2</span>                          <span class="c1">// SimpleExample</span>
  <span class="nl">super_class:</span> <span class="err">#</span><span class="mi">3</span>                         <span class="c1">// java/lang/Object</span>
  <span class="nl">interfaces:</span> <span class="mi">0</span><span class="o">,</span> <span class="nl">fields:</span> <span class="mi">0</span><span class="o">,</span> <span class="nl">methods:</span> <span class="mi">1</span><span class="o">,</span> <span class="nl">attributes:</span> <span class="mi">1</span>
<span class="nc">Constant</span> <span class="nl">pool:</span>
   <span class="err">#</span><span class="mi">1</span> <span class="o">=</span> <span class="nc">Methodref</span>          <span class="err">#</span><span class="mi">3</span><span class="o">.</span><span class="err">#</span><span class="mi">13</span>         <span class="c1">// java/lang/Object."&lt;init&gt;":()V</span>
   <span class="err">#</span><span class="mi">2</span> <span class="o">=</span> <span class="nc">Class</span>              <span class="err">#</span><span class="mi">14</span>            <span class="c1">// SimpleExample</span>
   <span class="err">#</span><span class="mi">3</span> <span class="o">=</span> <span class="nc">Class</span>              <span class="err">#</span><span class="mi">15</span>            <span class="c1">// java/lang/Object</span>
   <span class="err">#</span><span class="mi">4</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;</span>
   <span class="err">#</span><span class="mi">5</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="o">()</span><span class="no">V</span>
   <span class="err">#</span><span class="mi">6</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="nc">Code</span>
   <span class="err">#</span><span class="mi">7</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="nc">LineNumberTable</span>
   <span class="err">#</span><span class="mi">8</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="nc">LocalVariableTable</span>
   <span class="err">#</span><span class="mi">9</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="k">this</span>
  <span class="err">#</span><span class="mi">10</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="nc">LSimpleExample</span><span class="o">;</span>
  <span class="err">#</span><span class="mi">11</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="nc">SourceFile</span>
  <span class="err">#</span><span class="mi">12</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="nc">SimpleExample</span><span class="o">.</span><span class="na">java</span>
  <span class="err">#</span><span class="mi">13</span> <span class="o">=</span> <span class="nc">NameAndType</span>        <span class="err">#</span><span class="mi">4</span><span class="o">:</span><span class="err">#</span><span class="mi">5</span>          <span class="c1">// "&lt;init&gt;":()V</span>
  <span class="err">#</span><span class="mi">14</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="nc">SimpleExample</span>
  <span class="err">#</span><span class="mi">15</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="n">java</span><span class="o">/</span><span class="n">lang</span><span class="o">/</span><span class="nc">Object</span>
<span class="o">{</span>
  <span class="kd">public</span> <span class="nf">SimpleExample</span><span class="o">();</span>
    <span class="nl">descriptor:</span> <span class="o">()</span><span class="no">V</span>
    <span class="nl">flags:</span> <span class="o">(</span><span class="mh">0x0001</span><span class="o">)</span> <span class="no">ACC_PUBLIC</span>
    <span class="nl">Code:</span>
      <span class="n">stack</span><span class="o">=</span><span class="mi">1</span><span class="o">,</span> <span class="n">locals</span><span class="o">=</span><span class="mi">1</span><span class="o">,</span> <span class="n">args_size</span><span class="o">=</span><span class="mi">1</span>
         <span class="mi">0</span><span class="o">:</span> <span class="n">aload_0</span>
         <span class="mi">1</span><span class="o">:</span> <span class="n">invokespecial</span> <span class="err">#</span><span class="mi">1</span>                  <span class="c1">// Method java/lang/Object."&lt;init&gt;":()V</span>
         <span class="mi">4</span><span class="o">:</span> <span class="k">return</span>
      <span class="nl">LineNumberTable:</span>
        <span class="n">line</span> <span class="mi">1</span><span class="o">:</span> <span class="mi">0</span>
      <span class="nl">LocalVariableTable:</span>
        <span class="nc">Start</span>  <span class="nc">Length</span>  <span class="nc">Slot</span>  <span class="nc">Name</span>   <span class="nc">Signature</span>
            <span class="mi">0</span>       <span class="mi">5</span>     <span class="mi">0</span>  <span class="k">this</span>   <span class="nc">LSimpleExample</span><span class="o">;</span>
<span class="o">}</span>
<span class="nl">SourceFile:</span> <span class="s">"SimpleExample.java"</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="魔术与版本号">魔术与版本号</h2>

<p>首先<code class="language-plaintext highlighter-rouge">SHA-256 checksum 062d6c...</code>是文件的<code class="language-plaintext highlighter-rouge">SHA-256</code>校验和，用于验证文件完整性。</p>

<p><code class="language-plaintext highlighter-rouge">Compiled from "SimpleExample.java"</code>: 表明这个<code class="language-plaintext highlighter-rouge">.class</code>文件是由<code class="language-plaintext highlighter-rouge">SimpleExample.java</code>源代码编译而来。</p>

<p><code class="language-plaintext highlighter-rouge">public class SimpleExample</code>: 对应源代码中的<code class="language-plaintext highlighter-rouge">public class SimpleExample {}</code>，表示这是一个公共类。</p>

<p>这些内容都不用重点关注。</p>

<hr />

<p><strong><code class="language-plaintext highlighter-rouge">minor version: 0</code></strong> 和 <strong><code class="language-plaintext highlighter-rouge">major version: 52</code></strong>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">major version: 52</code> 对应 Java SE 8 (JDK 1.8)。这意味着该类文件是由JDK 1.8或更高版本编译的，并且可以在JDK 1.8或更高版本的JVM上运行。</li>
  <li><code class="language-plaintext highlighter-rouge">minor version</code> 通常在主版本号不变的情况下进行微小的更新，这里是0。</li>
</ul>

<p>根据官网，class文件结构其实是遵循下面这样的结构的：</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre><span class="nc">ClassFile</span> <span class="o">{</span>
    <span class="n">u4</span>             <span class="n">magic</span><span class="o">;</span>
    <span class="n">u2</span>             <span class="n">minor_version</span><span class="o">;</span>
    <span class="n">u2</span>             <span class="n">major_version</span><span class="o">;</span>
    <span class="n">u2</span>             <span class="n">constant_pool_count</span><span class="o">;</span>
    <span class="n">cp_info</span>        <span class="n">constant_pool</span><span class="o">[</span><span class="n">constant_pool_count</span><span class="o">-</span><span class="mi">1</span><span class="o">];</span>
    <span class="n">u2</span>             <span class="n">access_flags</span><span class="o">;</span>
    <span class="n">u2</span>             <span class="n">this_class</span><span class="o">;</span>
    <span class="n">u2</span>             <span class="n">super_class</span><span class="o">;</span>
    <span class="n">u2</span>             <span class="n">interfaces_count</span><span class="o">;</span>
    <span class="n">u2</span>             <span class="n">interfaces</span><span class="o">[</span><span class="n">interfaces_count</span><span class="o">];</span>
    <span class="n">u2</span>             <span class="n">fields_count</span><span class="o">;</span>
    <span class="n">field_info</span>     <span class="n">fields</span><span class="o">[</span><span class="n">fields_count</span><span class="o">];</span>
    <span class="n">u2</span>             <span class="n">methods_count</span><span class="o">;</span>
    <span class="n">method_info</span>    <span class="n">methods</span><span class="o">[</span><span class="n">methods_count</span><span class="o">];</span>
    <span class="n">u2</span>             <span class="n">attributes_count</span><span class="o">;</span>
    <span class="n">attribute_info</span> <span class="n">attributes</span><span class="o">[</span><span class="n">attributes_count</span><span class="o">];</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">u4</code>代表unsigned 4字节，同理<code class="language-plaintext highlighter-rouge">u2</code>就代表unsigned 2字节。</p>

<p>一开始4个字节是<code class="language-plaintext highlighter-rouge">magic</code>，一般翻译成魔术，是固定的4个字节的值——<code class="language-plaintext highlighter-rouge">cafe babe</code>:</p>

<p><img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250603134819416.png" alt="image-20250603134819416" style="zoom:40%;" /></p>

<p>在上面的文件中<code class="language-plaintext highlighter-rouge">minor_version</code>就是<code class="language-plaintext highlighter-rouge">0000</code>,<code class="language-plaintext highlighter-rouge">major version</code>就是<code class="language-plaintext highlighter-rouge">0034</code>。而34（十六进制，3*16+4=52）变成十进制就是52，就代表是<code class="language-plaintext highlighter-rouge">JDK 1.8</code>。</p>

<hr />

<h2 id="常量池">常量池</h2>

<p><code class="language-plaintext highlighter-rouge">constant_pool_count</code>:常量池计数器,上图中是<code class="language-plaintext highlighter-rouge">0010</code>，即十进制的16，其实真正常量池中应该有15个。官网详细说明了：</p>

<blockquote>
  <p>The value of the <code class="language-plaintext highlighter-rouge">constant_pool_count</code> item is equal to the number of entries in the <code class="language-plaintext highlighter-rouge">constant_pool</code> table plus one. A <code class="language-plaintext highlighter-rouge">constant_pool</code> index is considered valid if it is greater than zero and less than <code class="language-plaintext highlighter-rouge">constant_pool_count</code>, with the exception for constants of type <code class="language-plaintext highlighter-rouge">long</code> and <code class="language-plaintext highlighter-rouge">double</code> noted in <a href="https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.5">§4.4.5</a>.</p>

  <p><code class="language-plaintext highlighter-rouge">Constant_pool_count </code>项的值等于 <code class="language-plaintext highlighter-rouge">constant_pool </code>表中的条目数加 1。如果 <code class="language-plaintext highlighter-rouge">constant_pool</code> 索引大于 0 且小于 <code class="language-plaintext highlighter-rouge">constant_pool_count</code>, 则视为有效，但 4.4.5 节中提到的 long 类型和 double 类型的常量除外。</p>
</blockquote>

<p>反编译的结果中也验证了这一点：</p>

<p><img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250603135358607.png" alt="image-20250603135358607" style="zoom:50%;" /></p>

<p>那么，<strong>常量池中最多可以有几个？</strong>因为是2字节，又要减1，所以是$2^{16}-1$。</p>

<hr />

<p>然后就是<code class="language-plaintext highlighter-rouge">cp_info</code>类型的<code class="language-plaintext highlighter-rouge">constant_pool[constant_pool_count-1];</code>。<code class="language-plaintext highlighter-rouge">Constant_pool</code> 是一个结构表, 表示 ClassFile 结构及其子结构中引用的各种字符串常量、类和接口名称、字段名称以及其他常量。每个 <code class="language-plaintext highlighter-rouge">constant_pool</code> 表项的格式由其第一个 “tag” 字节指示。<code class="language-plaintext highlighter-rouge">Constant_pool</code> 表的索引从 1 到 <code class="language-plaintext highlighter-rouge">constant_pool_count-1</code>(上图中就是从<code class="language-plaintext highlighter-rouge">#1</code>到<code class="language-plaintext highlighter-rouge">#15</code>)。</p>

<blockquote>
  <p>tag是什么？是常量池表项的第一个字节，指示表项的类型（如 CONSTANT_Utf8、CONSTANT_Class、CONSTANT_Methodref 等）。</p>

  <p>下面是所有的类型罗列：</p>

  <table>
    <thead>
      <tr>
        <th>tag</th>
        <th>常量类型 (cp_info)</th>
        <th>描述</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>1</td>
        <td>CONSTANT_Utf8_info</td>
        <td>length: 2字节，表示 UTF-8 编码字符串的字节数 bytes: 长度为 length 的字节序列</td>
      </tr>
      <tr>
        <td>3</td>
        <td>CONSTANT_Integer_info</td>
        <td>bytes: 4字节，Big-Endian（高位在前）存储的整数值</td>
      </tr>
      <tr>
        <td>4</td>
        <td>CONSTANT_Float_info</td>
        <td>bytes: 4字节，Big-Endian（高位在前）存储的 IEEE 754 浮点数</td>
      </tr>
      <tr>
        <td>5</td>
        <td>CONSTANT_Long_info</td>
        <td>bytes: 8字节，Big-Endian（高位在前）存储的长整数值</td>
      </tr>
      <tr>
        <td>6</td>
        <td>CONSTANT_Double_info</td>
        <td>bytes: 8字节，Big-Endian（高位在前）存储的 IEEE 754 双精度浮点数</td>
      </tr>
      <tr>
        <td>7</td>
        <td>CONSTANT_Class_info</td>
        <td>index: 2字节，指向常量池中某个 CONSTANT_Utf8_info 表项，表示类或接口名</td>
      </tr>
      <tr>
        <td>8</td>
        <td>CONSTANT_String_info</td>
        <td>index: 2字节，指向常量池中某个 CONSTANT_Utf8_info 表项，表示字符串</td>
      </tr>
      <tr>
        <td>9</td>
        <td>CONSTANT_Fieldref_info</td>
        <td>index: 2字节，指向声明字段的类或接口的 CONSTANT_Class_info 表项 index: 2字节，指向 CONSTANT_NameAndType_info 表项</td>
      </tr>
      <tr>
        <td>10</td>
        <td>CONSTANT_Methodref_info</td>
        <td>index: 2字节，指向声明方法的类的 CONSTANT_Class_info 表项 index: 2字节，指向 CONSTANT_NameAndType_info 表项</td>
      </tr>
      <tr>
        <td>11</td>
        <td>CONSTANT_InterfaceMethodref_info</td>
        <td>index: 2字节，指向声明接口方法的接口的 CONSTANT_Class_info 表项 index: 2字节，指向 CONSTANT_NameAndType_info 表项</td>
      </tr>
      <tr>
        <td>12</td>
        <td>CONSTANT_NameAndType_info</td>
        <td>index: 2字节，指向字段或方法的名称的 CONSTANT_Utf8_info 表项 index: 2字节，指向字段或方法的描述符的 CONSTANT_Utf8_info 表项</td>
      </tr>
      <tr>
        <td>15</td>
        <td>CONSTANT_MethodHandle_info</td>
        <td>reference_kind: 1字节，1-9 之间的值，表示引用的类型（如方法调用、字段访问等） reference_index: 2字节，指向常量池中对应的表项</td>
      </tr>
      <tr>
        <td>16</td>
        <td>CONSTANT_MethodType_info</td>
        <td>descriptor_index: 2字节，指向 CONSTANT_Utf8_info 表项，表示方法的描述符</td>
      </tr>
      <tr>
        <td>18</td>
        <td>CONSTANT_InvokeDynamic_info</td>
        <td>bootstrap_method_attr_index: 2字节，指向 Class 文件中 BootstrapMethods 属性的表项 name_and_type_index: 2字节，指向 CONSTANT_NameAndType_info 表项，表示方法名和描述符</td>
      </tr>
    </tbody>
  </table>

  <p>表格中的每一行对应一个 tag 值及其对应的 cp_info 结构。</p>
</blockquote>

<p>例如对于刚才反编译的结果：</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre>   <span class="err">#</span><span class="mi">1</span> <span class="o">=</span> <span class="nc">Methodref</span>          <span class="err">#</span><span class="mi">3</span><span class="o">.</span><span class="err">#</span><span class="mi">13</span>         <span class="c1">// java/lang/Object."&lt;init&gt;":()V</span>
   <span class="err">#</span><span class="mi">2</span> <span class="o">=</span> <span class="nc">Class</span>              <span class="err">#</span><span class="mi">14</span>            <span class="c1">// SimpleExample</span>
   <span class="err">#</span><span class="mi">3</span> <span class="o">=</span> <span class="nc">Class</span>              <span class="err">#</span><span class="mi">15</span>            <span class="c1">// java/lang/Object</span>
   <span class="err">#</span><span class="mi">4</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;</span>
   <span class="err">#</span><span class="mi">5</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="o">()</span><span class="no">V</span>
   <span class="err">#</span><span class="mi">6</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="nc">Code</span>
   <span class="err">#</span><span class="mi">7</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="nc">LineNumberTable</span>
   <span class="err">#</span><span class="mi">8</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="nc">LocalVariableTable</span>
   <span class="err">#</span><span class="mi">9</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="k">this</span>
  <span class="err">#</span><span class="mi">10</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="nc">LSimpleExample</span><span class="o">;</span>
  <span class="err">#</span><span class="mi">11</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="nc">SourceFile</span>
  <span class="err">#</span><span class="mi">12</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="nc">SimpleExample</span><span class="o">.</span><span class="na">java</span>
  <span class="err">#</span><span class="mi">13</span> <span class="o">=</span> <span class="nc">NameAndType</span>        <span class="err">#</span><span class="mi">4</span><span class="o">:</span><span class="err">#</span><span class="mi">5</span>          <span class="c1">// "&lt;init&gt;":()V</span>
  <span class="err">#</span><span class="mi">14</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="nc">SimpleExample</span>
  <span class="err">#</span><span class="mi">15</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="n">java</span><span class="o">/</span><span class="n">lang</span><span class="o">/</span><span class="nc">Object</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>第一个是<code class="language-plaintext highlighter-rouge">Methodref</code>类型，对应tag=10,表示：指向声明方法的类的 CONSTANT_Class_info 表项（2字节），指向 CONSTANT_NameAndType_info 表项（2字节）。这里指向了<code class="language-plaintext highlighter-rouge">#3</code>和<code class="language-plaintext highlighter-rouge">#13</code>，对应的是</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="err">#</span><span class="mi">3</span> <span class="o">=</span> <span class="nc">Class</span>              <span class="err">#</span><span class="mi">15</span>            <span class="c1">// java/lang/Object</span>
<span class="err">#</span><span class="mi">13</span> <span class="o">=</span> <span class="nc">NameAndType</span>        <span class="err">#</span><span class="mi">4</span><span class="o">:</span><span class="err">#</span><span class="mi">5</span>          <span class="c1">// "&lt;init&gt;":()V</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">#3</code>是<code class="language-plaintext highlighter-rouge">Object</code>类，而<code class="language-plaintext highlighter-rouge">#13</code>对应的是<code class="language-plaintext highlighter-rouge">"&lt;init&gt;":()V</code>，其中<code class="language-plaintext highlighter-rouge">()</code>代表的是空的参数列表，V代表返回值类型是<code class="language-plaintext highlighter-rouge">void</code>，其实这个<code class="language-plaintext highlighter-rouge">"&lt;init&gt;":()V</code>就是空的构造方法，表示当前类（<code class="language-plaintext highlighter-rouge">SimpleExample</code>）的构造器将调用其父类<code class="language-plaintext highlighter-rouge">java.lang.Object</code>的无参构造器。（我们都知道当一个类被实例化时，java语言规范要求在调用子类构造器之前，必须先调用其父类的构造器）。</p>

<hr />

<p>接着往下就是</p>

<p><strong><code class="language-plaintext highlighter-rouge">#2 = Class #14 // SimpleExample</code></strong>: 这是一个类引用，指向常量池中的<code class="language-plaintext highlighter-rouge">#14</code>，它是一个UTF-8字符串<code class="language-plaintext highlighter-rouge">SimpleExample</code>，表示当前类的名称。</p>

<p><strong><code class="language-plaintext highlighter-rouge">#3 = Class #15 // java/lang/Object</code></strong>: 这是一个类引用，指向常量池中的<code class="language-plaintext highlighter-rouge">#15</code>，它是一个UTF-8字符串<code class="language-plaintext highlighter-rouge">java/lang/Object</code>，表示父类的名称。</p>

<p><strong><code class="language-plaintext highlighter-rouge">#4 = Utf8 &lt;init&gt;</code></strong>: UTF-8字符串，表示特殊方法名<code class="language-plaintext highlighter-rouge">&lt;init&gt;</code>，这是Java中实例构造器的名称。</p>

<p><strong><code class="language-plaintext highlighter-rouge">#5 = Utf8 ()V</code></strong>: UTF-8字符串，表示方法的描述符。<code class="language-plaintext highlighter-rouge">()</code>表示无参数，<code class="language-plaintext highlighter-rouge">V</code>表示返回类型为<code class="language-plaintext highlighter-rouge">void</code>。所以<code class="language-plaintext highlighter-rouge">()V</code>表示一个无参数且无返回值的构造器或方法。</p>

<hr />

<p>然后就到了code 属性，这是决定代码逻辑最重要的东西：code属性是方法信息（method_info）结构中的一个可选属性，用于存储方法的字节码以及相关的执行信息。它主要出现在非抽象、非本地（non-native）方法的定义中，例如 SimpleExample.class 中 public SimpleExample() 方法的 Code 属性部分。下面是<code class="language-plaintext highlighter-rouge">#6</code>是UTF-8字符串，表示一个方法属性的名称，即<code class="language-plaintext highlighter-rouge">Code</code>属性，它包含了方法的字节码指令。</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="err">#</span><span class="mi">6</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="nc">Code</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250603152051318.png" alt="image-20250603152051318" style="zoom:50%;" /></p>

<p>在后面会有详细的code属性。后面再解释，先把所有的常量池大致看完：</p>

<p><strong><code class="language-plaintext highlighter-rouge">#7 = Utf8 LineNumberTable</code></strong>: UTF-8字符串，表示一个方法属性的名称，即<code class="language-plaintext highlighter-rouge">LineNumberTable</code>属性，用于将字节码指令的偏移量映射到源代码的行号。</p>

<p><strong><code class="language-plaintext highlighter-rouge">#8 = Utf8 LocalVariableTable</code></strong>: UTF-8字符串，表示一个方法属性的名称，即<code class="language-plaintext highlighter-rouge">LocalVariableTable</code>属性，用于描述方法中的局部变量。</p>

<p><strong><code class="language-plaintext highlighter-rouge">#9 = Utf8 this</code></strong>: UTF-8字符串，表示局部变量的名称<code class="language-plaintext highlighter-rouge">this</code>。</p>

<p><strong><code class="language-plaintext highlighter-rouge">#10 = Utf8 LSimpleExample;</code></strong>: UTF-8字符串，表示局部变量的类型描述符。<code class="language-plaintext highlighter-rouge">L</code>表示这是一个对象类型，<code class="language-plaintext highlighter-rouge">SimpleExample;</code>是其全限定名，分号表示结束。所以<code class="language-plaintext highlighter-rouge">LSimpleExample;</code>表示类型为<code class="language-plaintext highlighter-rouge">SimpleExample</code>的对象。</p>

<p><strong><code class="language-plaintext highlighter-rouge">#11 = Utf8 SourceFile</code></strong>: UTF-8字符串，表示一个类文件属性的名称，即<code class="language-plaintext highlighter-rouge">SourceFile</code>属性。</p>

<p><strong><code class="language-plaintext highlighter-rouge">#12 = Utf8 SimpleExample.java</code></strong>: UTF-8字符串，表示源文件的名称。</p>

<p><strong><code class="language-plaintext highlighter-rouge">#13 = NameAndType #4:#5 // "&lt;init&gt;":()V</code></strong>: 这是一个名称和类型描述符的组合。</p>

<ul>
  <li>它引用了常量池中的<code class="language-plaintext highlighter-rouge">#4</code>（名称<code class="language-plaintext highlighter-rouge">&lt;init&gt;</code>）和<code class="language-plaintext highlighter-rouge">#5</code>（描述符<code class="language-plaintext highlighter-rouge">()V</code>）。</li>
  <li>组合起来表示一个无参无返回值的构造器。</li>
</ul>

<p><strong><code class="language-plaintext highlighter-rouge">#14 = Utf8 SimpleExample</code></strong>: UTF-8字符串，表示类名<code class="language-plaintext highlighter-rouge">SimpleExample</code>。</p>

<p><strong><code class="language-plaintext highlighter-rouge">#15 = Utf8 java/lang/Object</code></strong>: UTF-8字符串，表示类名<code class="language-plaintext highlighter-rouge">java/lang/Object</code>。</p>

<hr />

<h2 id="method">Method</h2>

<p>常量池之后会有这样一块内容：</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="o">{</span>
  <span class="kd">public</span> <span class="nf">SimpleExample</span><span class="o">();</span>
    <span class="nl">descriptor:</span> <span class="o">()</span><span class="no">V</span>
    <span class="nl">flags:</span> <span class="o">(</span><span class="mh">0x0001</span><span class="o">)</span> <span class="no">ACC_PUBLIC</span>
    <span class="nl">Code:</span>
      <span class="n">stack</span><span class="o">=</span><span class="mi">1</span><span class="o">,</span> <span class="n">locals</span><span class="o">=</span><span class="mi">1</span><span class="o">,</span> <span class="n">args_size</span><span class="o">=</span><span class="mi">1</span>
         <span class="mi">0</span><span class="o">:</span> <span class="n">aload_0</span>
         <span class="mi">1</span><span class="o">:</span> <span class="n">invokespecial</span> <span class="err">#</span><span class="mi">1</span>                  <span class="c1">// Method java/lang/Object."&lt;init&gt;":()V</span>
         <span class="mi">4</span><span class="o">:</span> <span class="k">return</span>
      <span class="nl">LineNumberTable:</span>
        <span class="n">line</span> <span class="mi">1</span><span class="o">:</span> <span class="mi">0</span>
      <span class="nl">LocalVariableTable:</span>
        <span class="nc">Start</span>  <span class="nc">Length</span>  <span class="nc">Slot</span>  <span class="nc">Name</span>   <span class="nc">Signature</span>
            <span class="mi">0</span>       <span class="mi">5</span>     <span class="mi">0</span>  <span class="k">this</span>   <span class="nc">LSimpleExample</span><span class="o">;</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>显示了类中定义的所有方法。由于<code class="language-plaintext highlighter-rouge">SimpleExample</code>类没有显式定义任何方法，编译器为其生成了一个默认的无参构造器<code class="language-plaintext highlighter-rouge">public SimpleExample();</code>。</p>

<p>然后这个构造方法分成了3部分描述：</p>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">descriptor: ()V</code></strong>: 方法的描述符。<code class="language-plaintext highlighter-rouge">()</code>表示该构造器不接受任何参数（参数列表是空），<code class="language-plaintext highlighter-rouge">V</code>表示返回类型为<code class="language-plaintext highlighter-rouge">void</code>（构造器没有显式返回值）。</li>
  <li><strong><code class="language-plaintext highlighter-rouge">flags: (0x0001) ACC_PUBLIC</code></strong>: 表示该构造器是公共的，可以被其他类访问。</li>
</ul>

<p>这里需要补充下flags.</p>

<h3 id="flags">flags</h3>

<p>在这个类中也有flags：</p>

<p><img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250603153300074.png" alt="image-20250603153300074" style="zoom:50%;" /></p>

<p>构造方法中也有flags:</p>

<p><img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250603153327386.png" alt="image-20250603153327386" style="zoom:50%;" /></p>

<table>
  <tbody>
    <tr>
      <td>flags 字段用于描述类、方法或字段的访问权限和属性。flags 是一个位掩码（bitmask），通过按位或（</td>
      <td>）组合多个标志位来表示不同的属性。每个标志位对应一个特定的二进制位，值的计算基于这些位的组合。</td>
    </tr>
  </tbody>
</table>

<p>首先说明：</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ACC_PUBLIC</code>：表示类是公共的（public），可以被其他类访问。</li>
  <li><code class="language-plaintext highlighter-rouge">ACC_SUPER</code>：一个历史遗留标志，用于控制 invokespecial 指令的行为（在现代 JVM 中通常被忽略，但编译器会默认设置）。
    <ul>
      <li>可以简单理解为：<code class="language-plaintext highlighter-rouge">ACC_SUPER</code>一般的类都会有，jvm默认都是有这个值的。（JDK1.0.2之后编译出来的类的这个标志都必须为真）</li>
    </ul>
  </li>
</ul>

<p>其实不止这2个取值，根据 Java 虚拟机规范（JVM Specification），类的访问标志（<code class="language-plaintext highlighter-rouge">access_flags</code>）是 16 位（2 字节），每个标志位对应一个特定的值（以十六进制表示）。</p>

<p>下面是所有的取值可能：</p>

<p><img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250603153750021.png" alt="image-20250603153750021" style="zoom:50%;" /></p>

<p>可以看到<code class="language-plaintext highlighter-rouge">ACC_SUPER</code>标志值是<code class="language-plaintext highlighter-rouge">0x0020</code>，而<code class="language-plaintext highlighter-rouge">ACC_PUBLIC</code>标志值是<code class="language-plaintext highlighter-rouge">0x0001</code>，如何计算得到<code class="language-plaintext highlighter-rouge">0x0021</code>的呢？</p>

<p>按位或即可：</p>

<p><img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250603154834303.png" alt="image-20250603154834303" style="zoom:50%;" /></p>

<hr />

<h3 id="code">code</h3>

<p>code包含了方法的字节码指令以及其他与代码执行相关的信息</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre>    <span class="nl">Code:</span>
      <span class="n">stack</span><span class="o">=</span><span class="mi">1</span><span class="o">,</span> <span class="n">locals</span><span class="o">=</span><span class="mi">1</span><span class="o">,</span> <span class="n">args_size</span><span class="o">=</span><span class="mi">1</span>
         <span class="mi">0</span><span class="o">:</span> <span class="n">aload_0</span>
         <span class="mi">1</span><span class="o">:</span> <span class="n">invokespecial</span> <span class="err">#</span><span class="mi">1</span>                  <span class="c1">// Method java/lang/Object."&lt;init&gt;":()V</span>
         <span class="mi">4</span><span class="o">:</span> <span class="k">return</span>
      <span class="nl">LineNumberTable:</span>
        <span class="n">line</span> <span class="mi">1</span><span class="o">:</span> <span class="mi">0</span>
      <span class="nl">LocalVariableTable:</span>
        <span class="nc">Start</span>  <span class="nc">Length</span>  <span class="nc">Slot</span>  <span class="nc">Name</span>   <span class="nc">Signature</span>
            <span class="mi">0</span>       <span class="mi">5</span>     <span class="mi">0</span>  <span class="k">this</span>   <span class="nc">LSimpleExample</span><span class="o">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">stack=1</code>: 操作数栈的最大深度为1。在执行过程中，最多需要1个栈帧来存储数据。</li>
  <li><code class="language-plaintext highlighter-rouge">locals=1</code>: 局部变量表的大小为1。局部变量表用于存储方法的参数和局部变量。</li>
  <li><code class="language-plaintext highlighter-rouge">args_size=1</code>: 方法的参数数量为1。对于实例方法（包括构造器），第一个局部变量槽（Slot 0）总是用来存储<code class="language-plaintext highlighter-rouge">this</code>引用。所以这里的<code class="language-plaintext highlighter-rouge">args_size=1</code>表示除了<code class="language-plaintext highlighter-rouge">this</code>之外没有其他显式参数。</li>
</ul>

<p>后面是3条指令：</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>         <span class="mi">0</span><span class="o">:</span> <span class="n">aload_0</span>
         <span class="mi">1</span><span class="o">:</span> <span class="n">invokespecial</span> <span class="err">#</span><span class="mi">1</span>                  <span class="c1">// Method java/lang/Object."&lt;init&gt;":()V</span>
         <span class="mi">4</span><span class="o">:</span> <span class="k">return</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>关于常见的指令总结在最后附录中。</p>

<p>解释这里3条指令：</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">0: aload_0</code>：冒号前面的<code class="language-plaintext highlighter-rouge">0</code> 是字节码指令的偏移量（offset）。<code class="language-plaintext highlighter-rouge">aload_0</code> 指令将局部变量表中索引为0的引用类型变量加载到操作数栈顶。在实例方法和构造器中，局部变量表的Slot 0 总是用于存储<code class="language-plaintext highlighter-rouge">this</code>引用。所以这条指令的作用是将当前对象（<code class="language-plaintext highlighter-rouge">this</code>）的引用压入操作数栈。</li>
  <li><code class="language-plaintext highlighter-rouge">1: invokespecial #1  // Method java/lang/Object."&lt;init&gt;":()V</code>:<code class="language-plaintext highlighter-rouge">1</code> 是字节码指令的偏移量。
    <ul>
      <li><code class="language-plaintext highlighter-rouge">invokespecial</code> 指令用于调用实例初始化方法（构造器）、私有方法和父类方法。</li>
      <li><code class="language-plaintext highlighter-rouge">#1</code> 指向常量池中索引为1的项，即<code class="language-plaintext highlighter-rouge">java/lang/Object."&lt;init&gt;":()V</code>，表示调用<code class="language-plaintext highlighter-rouge">java.lang.Object</code>类的无参构造器。</li>
      <li>在Java中，每个构造器的第一行（如果没有显式调用<code class="language-plaintext highlighter-rouge">this()</code>或<code class="language-plaintext highlighter-rouge">super()</code>）都会隐式调用父类的无参构造器。</li>
    </ul>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">4: return</code></strong>:</p>

    <ul>
      <li>
        <p><code class="language-plaintext highlighter-rouge">4</code> 是字节码指令的偏移量。</p>
      </li>
      <li>
        <p><code class="language-plaintext highlighter-rouge">return</code> 指令用于从方法中返回。对于<code class="language-plaintext highlighter-rouge">void</code>方法或构造器，它只是简单地结束方法的执行。</p>
      </li>
    </ul>
  </li>
</ul>

<hr />

<p>画图说明这3行指令的过程：</p>

<p>首先要注意：在任何Java实例方法或构造器开始执行时，JVM 会为该方法创建一个 <strong>栈帧（Stack Frame）</strong>。栈帧中包含：</p>

<ol>
  <li><strong>局部变量表 (Local Variable Table)</strong>：用于存储方法的参数和局部变量。对于实例方法，第一个槽位（Slot 0）总是用来存储 <code class="language-plaintext highlighter-rouge">this</code> 引用。</li>
  <li><strong>操作数栈 (Operand Stack)</strong>：一个基于栈的临时存储区域，用于存储计算过程中的中间结果以及方法调用的参数和返回值。</li>
</ol>

<p>当 JVM 调用 <code class="language-plaintext highlighter-rouge">SimpleExample</code> 构造器时，会创建一个新的栈帧。局部变量表中的 Slot 0 会被填充为当前 <code class="language-plaintext highlighter-rouge">SimpleExample</code> 实例的引用（即 <code class="language-plaintext highlighter-rouge">this</code>），操作数栈为空。</p>

<p><img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250604155134474.png" alt="image-20250604155134474" style="zoom:50%;" /></p>

<p><code class="language-plaintext highlighter-rouge">aload_0</code> 将局部变量表索引为 0 的引用类型变量（即 <code class="language-plaintext highlighter-rouge">this</code> 引用）加载到操作数栈顶。</p>

<p><img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250604155442153.png" alt="image-20250604155442153" style="zoom:50%;" /></p>

<p><code class="language-plaintext highlighter-rouge">invokespecial</code> 用于调用父类的构造器。它会从操作数栈顶弹出一个对象引用（这里是 <code class="language-plaintext highlighter-rouge">this</code> 引用），作为隐式参数传递给被调用的方法（<code class="language-plaintext highlighter-rouge">java.lang.Object</code> 的 <code class="language-plaintext highlighter-rouge">&lt;init&gt;</code> 方法），然后执行该方法。</p>

<p>在这个例子中，<code class="language-plaintext highlighter-rouge">#1</code> 指向 <code class="language-plaintext highlighter-rouge">java/lang/Object."&lt;init&gt;":()V</code>，表示调用 <code class="language-plaintext highlighter-rouge">Object</code> 类的无参构造器。<code class="language-plaintext highlighter-rouge">invokespecial</code> 会消耗栈顶的 <code class="language-plaintext highlighter-rouge">this</code> 引用。</p>

<p>执行完 <code class="language-plaintext highlighter-rouge">invokespecial</code> 后，PC 会更新为下一条指令的偏移量 <code class="language-plaintext highlighter-rouge">4</code>。</p>

<p><strong>栈帧变化：</strong> 操作数栈顶的 <code class="language-plaintext highlighter-rouge">this</code> 引用被消耗（弹出）。在 <code class="language-plaintext highlighter-rouge">Object.&lt;init&gt;()V</code> 执行期间，JVM 会创建并压入一个新的栈帧到JVM栈上（这里未显示，因为它属于另一个方法调用），当 <code class="language-plaintext highlighter-rouge">Object.&lt;init&gt;()V</code> 执行完毕后，该栈帧会被弹出，控制权返回给 <code class="language-plaintext highlighter-rouge">SimpleExample.&lt;init&gt;()</code> 的栈帧。</p>

<p><img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250604155642940.png" alt="image-20250604155642940" style="zoom:50%;" /></p>

<p><code class="language-plaintext highlighter-rouge">4: return</code> 表示从方法中返回。对于 <code class="language-plaintext highlighter-rouge">void</code> 方法或构造器，它不需要返回任何值。</p>

<ul>
  <li><strong>程序计数器 (PC) 变化：</strong> <code class="language-plaintext highlighter-rouge">return</code> 指令执行后，当前方法结束，PC 的值通常会变得不确定或指向调用者的下一条指令（取决于JVM实现，但对于当前方法而言，其PC不再有效）。</li>
  <li><strong>栈帧变化：</strong> 当前 <code class="language-plaintext highlighter-rouge">SimpleExample.&lt;init&gt;()</code> 的栈帧被销毁，并从JVM栈中弹出。</li>
</ul>

<p><img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250604155918812.png" alt="image-20250604155918812" style="zoom:50%;" /></p>

<h2 id="方法描述符补充">方法描述符补充</h2>

<p>上面已经看到对于参数列表是空，返回值是void的方法（包括构造方法），方法描述符是<code class="language-plaintext highlighter-rouge">()V</code></p>

<p>如果是其他情况呢？下面是字段描述符：</p>

<table>
  <thead>
    <tr>
      <th>FieldType 中的字符</th>
      <th>类型</th>
      <th>含义</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>B</td>
      <td>byte</td>
      <td>有符号的字节型数</td>
    </tr>
    <tr>
      <td>C</td>
      <td>char</td>
      <td>Unicode 字符码点，UTF-16 编码</td>
    </tr>
    <tr>
      <td>D</td>
      <td>double</td>
      <td>双精度浮点数</td>
    </tr>
    <tr>
      <td>F</td>
      <td>float</td>
      <td>单精度浮点数</td>
    </tr>
    <tr>
      <td>I</td>
      <td>int</td>
      <td>整型数</td>
    </tr>
    <tr>
      <td>J</td>
      <td>long</td>
      <td>长整型</td>
    </tr>
    <tr>
      <td>L <em>className</em>;</td>
      <td>reference</td>
      <td><em>ClassName</em> 类的实例</td>
    </tr>
    <tr>
      <td>S</td>
      <td>short</td>
      <td>有符号短整型</td>
    </tr>
    <tr>
      <td>Z</td>
      <td>boolean</td>
      <td>布尔值 true/false</td>
    </tr>
    <tr>
      <td>[</td>
      <td>Reference</td>
      <td>一个一维数组</td>
    </tr>
  </tbody>
</table>

<p>如 String 类的实例，其描述符为 Ljava/lang/String。二维数组 int [][] 类型的实例变量，其描述符为 [[I。</p>

<p>看一道习题：</p>

<p>如果一个方法需要接收一个<code class="language-plaintext highlighter-rouge">int</code>类型的参数并返回一个<code class="language-plaintext highlighter-rouge">String</code>对象，它的方法描述符会是什么样子？</p>

<p>A.(I)LString;</p>

<p>B.(I)Ljava/lang/String;</p>

<p>C.(I)S</p>

<p>D.(int)String</p>

<blockquote>
  <p>答案：B</p>

  <p>首先int对应FieldType 中的字符中的<code class="language-plaintext highlighter-rouge">I</code>，其次String对应的是<code class="language-plaintext highlighter-rouge">Ljava/lang/String</code></p>
</blockquote>

<h1 id="附录">附录</h1>

<h2 id="1常见jvm指令">1.常见jvm指令</h2>

<p>关于jvm的指令集（一共也就二百多条指令）官网：https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.10.1.9</p>

<p>下面是常见的总结：</p>

<table>
  <thead>
    <tr>
      <th>类型</th>
      <th>助记符</th>
      <th>含义</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>常量</td>
      <td>const_null</td>
      <td>将 null 推到栈顶</td>
    </tr>
    <tr>
      <td> </td>
      <td>iconst_1</td>
      <td>将整数类型的 1 推到栈顶</td>
    </tr>
    <tr>
      <td> </td>
      <td>fconst_0</td>
      <td>将 float 类型的 2 推到栈顶</td>
    </tr>
    <tr>
      <td> </td>
      <td>dcounst_0</td>
      <td>将 double 类型的 0 推到栈顶</td>
    </tr>
    <tr>
      <td> </td>
      <td>ldc</td>
      <td>将 int 、float 或 String 类型常量值从常量池推至栈顶</td>
    </tr>
    <tr>
      <td> </td>
      <td>…</td>
      <td> </td>
    </tr>
    <tr>
      <td>加载</td>
      <td>iload</td>
      <td>将指定的 int 类型本地变量推送至栈顶</td>
    </tr>
    <tr>
      <td> </td>
      <td>iload_2</td>
      <td>第 2 个 int 类型本地变量推送至栈顶</td>
    </tr>
    <tr>
      <td> </td>
      <td>aload_3</td>
      <td>将第 3 个引用类型的本地变量推送至栈顶</td>
    </tr>
    <tr>
      <td> </td>
      <td>cload</td>
      <td>将 char 类型数组的指定元素推送至栈顶</td>
    </tr>
    <tr>
      <td> </td>
      <td>…</td>
      <td> </td>
    </tr>
    <tr>
      <td>存储</td>
      <td>istore</td>
      <td>将栈顶 int 类型数值存入指定的本地变量</td>
    </tr>
    <tr>
      <td> </td>
      <td>astore</td>
      <td>将栈顶引用类型的数值存入指定的本地变量</td>
    </tr>
    <tr>
      <td> </td>
      <td>istore_3</td>
      <td>将栈顶 int 类型数值存入第 3 个本地变量</td>
    </tr>
    <tr>
      <td> </td>
      <td>…</td>
      <td> </td>
    </tr>
    <tr>
      <td>引用</td>
      <td>getstatic</td>
      <td>获取指定类的静态字段，并将其压入栈顶</td>
    </tr>
    <tr>
      <td> </td>
      <td>putstatic</td>
      <td>为指定类的静态字段赋值</td>
    </tr>
    <tr>
      <td> </td>
      <td>getfield</td>
      <td>获取指定类的实例字段，并将其值压入栈顶</td>
    </tr>
    <tr>
      <td> </td>
      <td>putfield</td>
      <td>为指定类的实例字段赋值</td>
    </tr>
    <tr>
      <td> </td>
      <td>invokevirtual</td>
      <td>调用实例方法</td>
    </tr>
    <tr>
      <td> </td>
      <td>invokespecial</td>
      <td>调用父方法、实例初始化方法、私有方法</td>
    </tr>
    <tr>
      <td> </td>
      <td>invokestatic</td>
      <td>调用静态方法</td>
    </tr>
    <tr>
      <td> </td>
      <td>invokeinterface</td>
      <td>调用接口方法</td>
    </tr>
    <tr>
      <td> </td>
      <td>invokedynamic</td>
      <td>调用动态连接方法</td>
    </tr>
    <tr>
      <td> </td>
      <td>new</td>
      <td>创建一个对象，并将其引用压入栈顶</td>
    </tr>
    <tr>
      <td> </td>
      <td>athrow</td>
      <td>将栈顶异常抛出</td>
    </tr>
    <tr>
      <td> </td>
      <td>instanceof</td>
      <td>检查对象是否为指定类的实例，如果是，将 1 压到栈顶，否则将 0 压到栈顶</td>
    </tr>
    <tr>
      <td> </td>
      <td>…</td>
      <td> </td>
    </tr>
    <tr>
      <td>栈</td>
      <td>pop</td>
      <td>将栈顶数值弹出（非 long 和 double）</td>
    </tr>
    <tr>
      <td> </td>
      <td>pop2</td>
      <td>将栈顶 long 或 double 数值弹出</td>
    </tr>
    <tr>
      <td> </td>
      <td>dup</td>
      <td>复制栈顶数值并将复制值压入栈顶</td>
    </tr>
    <tr>
      <td> </td>
      <td>…</td>
      <td> </td>
    </tr>
    <tr>
      <td>控制</td>
      <td>ireturn</td>
      <td>从当前方法返回 int 值</td>
    </tr>
    <tr>
      <td> </td>
      <td>return</td>
      <td>从当前方法返回 void 值</td>
    </tr>
    <tr>
      <td> </td>
      <td>…</td>
      <td> </td>
    </tr>
    <tr>
      <td>比较</td>
      <td>ifeq</td>
      <td>当栈顶的 int 类型的数值等于 0 时跳转</td>
    </tr>
    <tr>
      <td> </td>
      <td>ifne</td>
      <td>当栈顶的 int 类型的数值不等于 0 时跳转</td>
    </tr>
    <tr>
      <td> </td>
      <td>…</td>
      <td> </td>
    </tr>
    <tr>
      <td>拓展</td>
      <td> </td>
      <td>为 null 时跳转</td>
    </tr>
    <tr>
      <td> </td>
      <td>…</td>
      <td> </td>
    </tr>
    <tr>
      <td>数学</td>
      <td>…</td>
      <td> </td>
    </tr>
    <tr>
      <td>转换</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>比较</td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h2 id="2习题">2.习题</h2>

<ol>
  <li>
    <p>字节码指令 <code class="language-plaintext highlighter-rouge">aload_0</code> 在这个构造器中的作用是什么？</p>

    <p>A.将 <code class="language-plaintext highlighter-rouge">this</code> 引用从局部变量表加载到操作数栈。</p>

    <p>B.分配内存给一个新对象。</p>

    <p>C.调用地址为0的方法。</p>

    <p>D.将整数0加载到操作数栈。</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">.class</code> 文件中的 <code class="language-plaintext highlighter-rouge">SourceFile</code> 属性有什么用途？</p>

    <p>A.指定该类文件依赖的其他源文件。</p>

    <p>B.在抛出异常时，用于在堆栈跟踪中显示源文件名和行号。</p>

    <p>C.包含整个Java源代码，以便JVM可以动态编译它。</p>

    <p>D.为编译器提供一个唯一的标识符。</p>
  </li>
  <li>
    <p>在JVM的运行时数据区中，哪个区域是所有线程共享的？</p>

    <p>A.Java虚拟机栈 (JVM Stack)</p>

    <p>B.方法区 (Method Area)</p>

    <p>C.本地方法栈 (Native Method Stack)</p>

    <p>D.程序计数器 (PC Register)</p>
  </li>
  <li>
    <p>阅读下面javap -p -v的反编译结果，在<code class="language-plaintext highlighter-rouge">javap</code>输出中，<code class="language-plaintext highlighter-rouge">this_class: #2</code> 这个条目指向常量池中的什么内容？</p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
</pre></td><td class="rouge-code"><pre><span class="nc">Classfile</span> <span class="o">/</span><span class="nc">Users</span><span class="o">/</span><span class="n">apple</span><span class="o">/</span><span class="nc">Documents</span><span class="o">/</span><span class="n">study</span><span class="o">/</span><span class="n">JVM_Exer</span><span class="o">/</span><span class="n">out</span><span class="o">/</span><span class="n">production</span><span class="o">/</span><span class="n">E_ClassFileFormat</span><span class="o">/</span><span class="nc">SimpleExample</span><span class="o">.</span><span class="na">class</span>
  <span class="nc">Last</span> <span class="n">modified</span> <span class="mi">2025</span><span class="n">年6月3日</span><span class="o">;</span> <span class="n">size</span> <span class="mi">264</span> <span class="n">bytes</span>
  <span class="no">SHA</span><span class="o">-</span><span class="mi">256</span> <span class="n">checksum</span> <span class="mo">062</span><span class="n">d6c4064cb0c855239a3a067596316804edc006b2232a562e6bdb325ecb5b8</span>
  <span class="nc">Compiled</span> <span class="n">from</span> <span class="s">"SimpleExample.java"</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SimpleExample</span>
  <span class="n">minor</span> <span class="nl">version:</span> <span class="mi">0</span>
  <span class="n">major</span> <span class="nl">version:</span> <span class="mi">52</span>
  <span class="nl">flags:</span> <span class="o">(</span><span class="mh">0x0021</span><span class="o">)</span> <span class="no">ACC_PUBLIC</span><span class="o">,</span> <span class="no">ACC_SUPER</span>
  <span class="nl">this_class:</span> <span class="err">#</span><span class="mi">2</span>                          <span class="c1">// SimpleExample</span>
  <span class="nl">super_class:</span> <span class="err">#</span><span class="mi">3</span>                         <span class="c1">// java/lang/Object</span>
  <span class="nl">interfaces:</span> <span class="mi">0</span><span class="o">,</span> <span class="nl">fields:</span> <span class="mi">0</span><span class="o">,</span> <span class="nl">methods:</span> <span class="mi">1</span><span class="o">,</span> <span class="nl">attributes:</span> <span class="mi">1</span>
<span class="nc">Constant</span> <span class="nl">pool:</span>
   <span class="err">#</span><span class="mi">1</span> <span class="o">=</span> <span class="nc">Methodref</span>          <span class="err">#</span><span class="mi">3</span><span class="o">.</span><span class="err">#</span><span class="mi">13</span>         <span class="c1">// java/lang/Object."&lt;init&gt;":()V</span>
   <span class="err">#</span><span class="mi">2</span> <span class="o">=</span> <span class="nc">Class</span>              <span class="err">#</span><span class="mi">14</span>            <span class="c1">// SimpleExample</span>
   <span class="err">#</span><span class="mi">3</span> <span class="o">=</span> <span class="nc">Class</span>              <span class="err">#</span><span class="mi">15</span>            <span class="c1">// java/lang/Object</span>
   <span class="err">#</span><span class="mi">4</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="o">&lt;</span><span class="n">init</span><span class="o">&gt;</span>
   <span class="err">#</span><span class="mi">5</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="o">()</span><span class="no">V</span>
   <span class="err">#</span><span class="mi">6</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="nc">Code</span>
   <span class="err">#</span><span class="mi">7</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="nc">LineNumberTable</span>
   <span class="err">#</span><span class="mi">8</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="nc">LocalVariableTable</span>
   <span class="err">#</span><span class="mi">9</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="k">this</span>
  <span class="err">#</span><span class="mi">10</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="nc">LSimpleExample</span><span class="o">;</span>
  <span class="err">#</span><span class="mi">11</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="nc">SourceFile</span>
  <span class="err">#</span><span class="mi">12</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="nc">SimpleExample</span><span class="o">.</span><span class="na">java</span>
  <span class="err">#</span><span class="mi">13</span> <span class="o">=</span> <span class="nc">NameAndType</span>        <span class="err">#</span><span class="mi">4</span><span class="o">:</span><span class="err">#</span><span class="mi">5</span>          <span class="c1">// "&lt;init&gt;":()V</span>
  <span class="err">#</span><span class="mi">14</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="nc">SimpleExample</span>
  <span class="err">#</span><span class="mi">15</span> <span class="o">=</span> <span class="nc">Utf8</span>               <span class="n">java</span><span class="o">/</span><span class="n">lang</span><span class="o">/</span><span class="nc">Object</span>
<span class="o">{</span>
  <span class="kd">public</span> <span class="nf">SimpleExample</span><span class="o">();</span>
    <span class="nl">descriptor:</span> <span class="o">()</span><span class="no">V</span>
    <span class="nl">flags:</span> <span class="o">(</span><span class="mh">0x0001</span><span class="o">)</span> <span class="no">ACC_PUBLIC</span>
    <span class="nl">Code:</span>
      <span class="n">stack</span><span class="o">=</span><span class="mi">1</span><span class="o">,</span> <span class="n">locals</span><span class="o">=</span><span class="mi">1</span><span class="o">,</span> <span class="n">args_size</span><span class="o">=</span><span class="mi">1</span>
         <span class="mi">0</span><span class="o">:</span> <span class="n">aload_0</span>
         <span class="mi">1</span><span class="o">:</span> <span class="n">invokespecial</span> <span class="err">#</span><span class="mi">1</span>                  <span class="c1">// Method java/lang/Object."&lt;init&gt;":()V</span>
         <span class="mi">4</span><span class="o">:</span> <span class="k">return</span>
      <span class="nl">LineNumberTable:</span>
        <span class="n">line</span> <span class="mi">1</span><span class="o">:</span> <span class="mi">0</span>
      <span class="nl">LocalVariableTable:</span>
        <span class="nc">Start</span>  <span class="nc">Length</span>  <span class="nc">Slot</span>  <span class="nc">Name</span>   <span class="nc">Signature</span>
            <span class="mi">0</span>       <span class="mi">5</span>     <span class="mi">0</span>  <span class="k">this</span>   <span class="nc">LSimpleExample</span><span class="o">;</span>
<span class="o">}</span>
<span class="nl">SourceFile:</span> <span class="s">"SimpleExample.java"</span>
   
</pre></td></tr></tbody></table></code></pre></div>    </div>

    <p>A.一个指向当前类的<code class="language-plaintext highlighter-rouge">Class</code>类型常量。</p>

    <p>B.一个指向父类的<code class="language-plaintext highlighter-rouge">Class</code>类型常量。</p>

    <p>C.当前类的实例（<code class="language-plaintext highlighter-rouge">this</code>引用）。</p>

    <p>D.一个名为<code class="language-plaintext highlighter-rouge">this_class</code>的UTF-8字符串。</p>
  </li>
  <li>
    <p>在Java中，如果一个类显式地定义了一个带参数的构造器，编译器还会自动生成一个无参构造器吗？</p>

    <p>A.会，但会将其设为<code class="language-plaintext highlighter-rouge">private</code>。</p>

    <p>B.不会，一旦用户定义了任何构造器，编译器就不再提供默认的无参构造器。</p>

    <p>C.会，编译器总是会确保有一个无参构造器。</p>

    <p>D.这取决于构造器是否是<code class="language-plaintext highlighter-rouge">public</code>的。</p>
  </li>
  <li>
    <p>在<code class="language-plaintext highlighter-rouge">Code</code>属性的字节码中，<code class="language-plaintext highlighter-rouge">return</code>指令的作用是什么？</p>

    <p>A.结束当前方法的执行并销毁当前栈帧。</p>

    <p>B.清空操作数栈和局部变量表。</p>

    <p>C.将操作数栈顶的值返回给调用者。</p>

    <p>D.跳转到方法的起始位置，重新执行。</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">.class</code>文件中的<code class="language-plaintext highlighter-rouge">LineNumberTable</code>属性的主要作用是什么？</p>

    <p>A.存储每个源代码行的文本内容。</p>

    <p>B.优化代码，移除不必要的代码行。</p>

    <p>C.定义类文件中总共有多少行代码。</p>

    <p>D.将字节码指令的偏移量映射到Java源代码的行号。</p>
  </li>
  <li>
    <p>程序计数器（PC Register）中存储的是什么？</p>

    <p>A.当前线程正在执行的字节码指令的地址（或偏移量）。</p>

    <p>B.当前操作数栈顶元素的值。</p>

    <p>C.下一个要执行的Java方法的内存地址。</p>

    <p>D.局部变量表中<code class="language-plaintext highlighter-rouge">this</code>引用的地址。</p>
  </li>
  <li>
    <p>在JVM中，“栈帧”（Stack Frame）是在什么时候被创建的？</p>

    <p>A.当一个对象被创建时（<code class="language-plaintext highlighter-rouge">new</code>）。</p>

    <p>B.当一个线程启动时。</p>

    <p>C.当一个类被加载时。</p>

    <p>D.当一个方法被调用时。</p>
  </li>
  <li>
    <p>如果一个方法需要接收一个<code class="language-plaintext highlighter-rouge">int</code>类型的参数并返回一个<code class="language-plaintext highlighter-rouge">String</code>对象，它的方法描述符会是什么样子？</p>

    <p>A.(I)LString;</p>

    <p>B.(I)Ljava/lang/String;</p>

    <p>C.(I)S</p>

    <p>D.(int)String</p>
  </li>
  <li>
    <p>字节码指令<code class="language-plaintext highlighter-rouge">iconst_1</code>的作用是什么？(可查附录1的表)</p>

    <p>A.创建一个包含一个元素的整型数组。</p>

    <p>B.将局部变量表中索引为1的整数加载到操作数栈。</p>

    <p>C.将常量1压入操作数栈。</p>

    <p>D.检查栈顶的整数是否等于1。</p>
  </li>
  <li>
    <p>在常量池中，<code class="language-plaintext highlighter-rouge">Utf8</code>类型的条目存储的是什么？</p>

    <p>A.一个32位的整数常量。</p>

    <p>B.一个指向其他常量池条目的索引。</p>

    <p>C.一个编译后的方法代码。</p>

    <p>D.一个UTF-8编码的字符串值。</p>
  </li>
  <li>
    <p>以下哪项是JVM中堆（Heap）区域的主要特点？</p>

    <p>A.它是所有线程共享的，用于存储对象实例和数组。</p>

    <p>B.它是线程私有的，用于存储局部变量。</p>

    <p>C.它存储了下一条要执行的字节码指令的地址。</p>

    <p>D.它主要用于存储运行时常量池。</p>
  </li>
  <li>
    <p>在<code class="language-plaintext highlighter-rouge">javap</code>输出中，<code class="language-plaintext highlighter-rouge">flags: (0x0001) ACC_PUBLIC</code> 在方法描述符中代表什么？</p>

    <p>A.该方法是公共的，可以从任何类访问。</p>

    <p>B.该方法是静态的。</p>

    <p>C.该方法可以被重写。</p>

    <p>D.该方法是抽象的。</p>
  </li>
  <li>
    <p>以下哪个字节码指令用于创建新的对象实例？</p>

    <p>A.<code class="language-plaintext highlighter-rouge">invokevirtual</code></p>

    <p>B.<code class="language-plaintext highlighter-rouge">astore_0</code></p>

    <p>C.<code class="language-plaintext highlighter-rouge">new</code></p>

    <p>D.<code class="language-plaintext highlighter-rouge">putfield</code></p>
  </li>
  <li>
    <p>方法描述符 <code class="language-plaintext highlighter-rouge">(Ljava/lang/String;I)V</code> 意味着什么？</p>

    <p>A.一个接受一个<code class="language-plaintext highlighter-rouge">String</code>参数和一个<code class="language-plaintext highlighter-rouge">int</code>参数，并且没有返回值的方法。</p>

    <p>B.一个接受一个<code class="language-plaintext highlighter-rouge">String</code>参数并返回一个<code class="language-plaintext highlighter-rouge">int</code>的方法。</p>

    <p>C.一个接受两个<code class="language-plaintext highlighter-rouge">String</code>参数的方法。</p>

    <p>D.一个返回<code class="language-plaintext highlighter-rouge">String</code>类型的方法，没有参数。</p>
  </li>
  <li>
    <p>在JVM中，为什么局部变量表中的Slot 0通常被<code class="language-plaintext highlighter-rouge">this</code>引用占据（对于实例方法而言）？</p>

    <p>A.因为<code class="language-plaintext highlighter-rouge">this</code>引用是唯一不需要初始化的局部变量。</p>

    <p>B.为了防止栈溢出错误。</p>

    <p>C.为了节省内存空间，因为<code class="language-plaintext highlighter-rouge">this</code>引用是最小的。</p>

    <p>D.为了在方法内部能够访问当前对象实例的成员。</p>
  </li>
  <li>
    <p>哪个JVM运行时数据区是线程私有的，用于存储每个方法调用的栈帧？</p>

    <p>A.Java虚拟机栈 (JVM Stack)</p>

    <p>B.运行时常量池 (Runtime Constant Pool)</p>

    <p>C.方法区 (Method Area)</p>

    <p>D.堆 (Heap)</p>
  </li>
  <li>
    <p>在常量池中，<code class="language-plaintext highlighter-rouge">NameAndType</code>类型的条目主要用于什么？</p>

    <p>A.指示一个方法是静态的还是实例的。</p>

    <p>B.存储字面量字符串。</p>

    <p>C.定义一个类的完整限定名。</p>

    <p>D.将字段或方法的名称和描述符组合起来。</p>
  </li>
  <li>
    <p>字节码指令<code class="language-plaintext highlighter-rouge">getfield</code>的作用是什么？</p>

    <p>A.调用一个方法。</p>

    <p>B.获取静态字段的值。</p>

    <p>C.获取数组中指定索引的元素。</p>

    <p>D.获取对象实例字段的值。</p>
  </li>
  <li>
    <p>在Java中，<code class="language-plaintext highlighter-rouge">final</code>关键字修饰的类在<code class="language-plaintext highlighter-rouge">javap</code>输出的<code class="language-plaintext highlighter-rouge">flags</code>中会体现为什么标志？</p>

    <p>A.<code class="language-plaintext highlighter-rouge">ACC_FINAL</code></p>

    <p>B.<code class="language-plaintext highlighter-rouge">ACC_ABSTRACT</code></p>

    <p>C.<code class="language-plaintext highlighter-rouge">ACC_SUPER</code></p>

    <p>D.<code class="language-plaintext highlighter-rouge">ACC_PUBLIC</code></p>
  </li>
  <li>
    <p>以下哪项是JVM中“垃圾回收”（Garbage Collection）的主要目标？</p>

    <p>A.将字节码转换为机器码。</p>

    <p>B.在程序运行时加载<code class="language-plaintext highlighter-rouge">.class</code>文件。</p>

    <p>C.优化CPU使用率。</p>

    <p>D.自动管理堆内存，回收不再被引用的对象。</p>
  </li>
  <li>
    <p>在JVM的内存区域中，哪一部分是用于存储方法运行时产生的局部变量和操作数栈的？</p>

    <p>A.方法区 (Method Area)</p>

    <p>B.堆 (Heap)</p>

    <p>C.程序计数器 (PC Register)</p>

    <p>D.Java虚拟机栈 (JVM Stack)</p>
  </li>
  <li>
    <p>在<code class="language-plaintext highlighter-rouge">javap</code>输出的常量池中，<code class="language-plaintext highlighter-rouge">Methodref</code>类型的条目通常指向哪两种其他类型的条目？</p>

    <p>A.<code class="language-plaintext highlighter-rouge">Fieldref</code>和<code class="language-plaintext highlighter-rouge">Methodref</code></p>

    <p>B.<code class="language-plaintext highlighter-rouge">Utf8</code>和<code class="language-plaintext highlighter-rouge">Integer</code></p>

    <p>C.<code class="language-plaintext highlighter-rouge">Class</code>和<code class="language-plaintext highlighter-rouge">NameAndType</code></p>

    <p>D.<code class="language-plaintext highlighter-rouge">Class</code>和<code class="language-plaintext highlighter-rouge">String</code></p>
  </li>
  <li>
    <p>如果一个Java方法在<code class="language-plaintext highlighter-rouge">javap</code>输出的<code class="language-plaintext highlighter-rouge">flags</code>中包含<code class="language-plaintext highlighter-rouge">ACC_STATIC</code>，这意味着什么？</p>

    <p>A.该方法是私有的，只能在类内部访问。</p>

    <p>B.该方法是一个类方法，不依赖于任何对象实例。</p>

    <p>C.该方法是同步的。</p>

    <p>D.该方法可以被子类重写。</p>
  </li>
  <li>
    <p>字节码指令<code class="language-plaintext highlighter-rouge">dup</code>的作用是什么？</p>

    <p>A.从局部变量表中复制一个值到另一个槽位。</p>

    <p>B.复制操作数栈顶的一个或多个字，并将其压回栈顶。</p>

    <p>C.将一个值从操作数栈复制到局部变量表。</p>

    <p>D.将操作数栈顶的两个值相加。</p>
  </li>
  <li>
    <p>方法描述符 <code class="language-plaintext highlighter-rouge">([Ljava/lang/String;)V</code> 最常用于表示哪个Java方法？</p>

    <p>A.<code class="language-plaintext highlighter-rouge">public String toString()</code></p>

    <p>B.<code class="language-plaintext highlighter-rouge">public static void main(String[] args)</code></p>

    <p>C.<code class="language-plaintext highlighter-rouge">public void run()</code></p>

    <p>D.<code class="language-plaintext highlighter-rouge">public int hashCode()</code></p>
  </li>
  <li>
    <p>在JVM中，当一个方法正常返回时，会发生什么？</p>

    <p>A.程序计数器重置为0。</p>

    <p>B.当前栈帧被销毁，并从Java虚拟机栈中弹出。</p>

    <p>C.当前线程被终止。</p>

    <p>D.垃圾回收器立即运行，清理所有不再使用的对象。</p>
  </li>
  <li>
    <p>以下哪种常量池条目类型用于表示一个类的全限定名？</p>

    <p>A.<code class="language-plaintext highlighter-rouge">Methodref</code></p>

    <p>B.<code class="language-plaintext highlighter-rouge">Fieldref</code></p>

    <p>C.<code class="language-plaintext highlighter-rouge">NameAndType</code></p>

    <p>D.<code class="language-plaintext highlighter-rouge">Class</code></p>
  </li>
  <li>
    <p>字节码指令<code class="language-plaintext highlighter-rouge">putstatic</code>的作用是什么？</p>

    <p>A.给对象实例字段赋值。</p>

    <p>B.将一个值从操作数栈存储到局部变量表。</p>

    <p>C.获取类的静态字段的值。</p>

    <p>D.给类的静态字段赋值。</p>
  </li>
  <li>
    <p>在Java中，当一个方法被<code class="language-plaintext highlighter-rouge">synchronized</code>关键字修饰时，在<code class="language-plaintext highlighter-rouge">javap</code>输出的<code class="language-plaintext highlighter-rouge">flags</code>中会体现为什么标志？</p>

    <p>A.<code class="language-plaintext highlighter-rouge">ACC_ABSTRACT</code></p>

    <p>B.<code class="language-plaintext highlighter-rouge">ACC_SYNCHRONIZED</code></p>

    <p>C.<code class="language-plaintext highlighter-rouge">ACC_FINAL</code></p>

    <p>D.<code class="language-plaintext highlighter-rouge">ACC_PUBLIC</code></p>
  </li>
  <li>
    <p>JVM的类加载过程通常包括哪三个主要阶段？</p>

    <p>A.分析、优化、执行</p>

    <p>B.编译、链接、运行</p>

    <p>C.创建、初始化、销毁</p>

    <p>D.加载、验证、准备</p>
  </li>
</ol>

<blockquote>
  <p>答案：</p>

  <ol>
    <li>
      <p>A，<code class="language-plaintext highlighter-rouge">aload_0</code> 指令将局部变量表中索引为0的对象引用（在此上下文中是 <code class="language-plaintext highlighter-rouge">this</code>）压入操作数栈，为后续的 <code class="language-plaintext highlighter-rouge">invokespecial</code> 调用做准备。</p>
    </li>
    <li>
      <p>B，JVM使用此属性以及 <code class="language-plaintext highlighter-rouge">LineNumberTable</code> 在异常堆栈跟踪中提供精确的调试信息，将字节码与源代码关联起来。为什么不选A？依赖关系通过常量池中的类和方法引用来管理，而不是 <code class="language-plaintext highlighter-rouge">SourceFile</code> 属性。</p>
    </li>
    <li>B：<img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250604161349613.png" alt="image-20250604161349613" style="zoom:50%;" />
      <blockquote>

        <p>方法区用于存储已被虚拟机加载的类信息、常量、静态变量等数据，是所有线程共享的。</p>
      </blockquote>
    </li>
    <li>
      <p>A，<code class="language-plaintext highlighter-rouge">this_class</code>通过索引指向常量池中的一个<code class="language-plaintext highlighter-rouge">CONSTANT_Class_info</code>结构，该结构进一步指向定义当前类名的UTF-8字符串。</p>
    </li>
    <li>
      <p>B,如果程序员已经提供了至少一个构造器，编译器会认为程序员已经接管了对象创建的逻辑，因此不会再自动添加任何构造器。</p>
    </li>
    <li>
      <p>A , 对于返回类型为<code class="language-plaintext highlighter-rouge">void</code>的方法（或构造器），<code class="language-plaintext highlighter-rouge">return</code>指令用于正常完成方法的执行，并导致当前栈帧从Java虚拟机栈中出栈。</p>
    </li>
    <li>
      <p>D ,这个属性是调试和异常堆栈跟踪的关键，它允许工具（如调试器和JVM）将执行中的字节码位置与开发者编写的源代码行对应起来。</p>
    </li>
    <li>
      <p>B ,程序计数器精确地指向下一条将要被解释器执行的字节码指令的地址，确保程序流程的正确执行。</p>
    </li>
    <li>
      <p>D , 每当一个方法被调用，JVM就会为该方法创建一个新的栈帧，并将其压入当前线程的Java虚拟机栈中。</p>
    </li>
    <li>
      <p>B , 首先int对应FieldType 中的字符中的<code class="language-plaintext highlighter-rouge">I</code>，其次String对应的是<code class="language-plaintext highlighter-rouge">Ljava/lang/String</code></p>
    </li>
    <li>
      <p>C， <code class="language-plaintext highlighter-rouge">iconst_1</code>是一条高效的指令，专门用于将<code class="language-plaintext highlighter-rouge">int</code>类型的常量值1加载到操作数栈顶。</p>
    </li>
    <li>
      <p>D，<code class="language-plaintext highlighter-rouge">Utf8</code>条目用于存储各种字符串字面量，包括类名、方法名、字段名以及描述符等。</p>
    </li>
    <li>
      <p>A，堆是JVM中最大的一块内存区域，所有线程共享，主要用于存储Java对象实例和数组，也是垃圾回收的主要区域。</p>
    </li>
    <li>
      <p>A，<code class="language-plaintext highlighter-rouge">ACC_PUBLIC</code>标志表示该方法具有公共访问权限，可以被其他类调用。</p>
    </li>
    <li>
      <p>C，<code class="language-plaintext highlighter-rouge">new</code>指令用于在堆上分配内存并创建新的对象实例，通常后面会跟<code class="language-plaintext highlighter-rouge">dup</code>和<code class="language-plaintext highlighter-rouge">invokespecial</code>来初始化对象。</p>
    </li>
    <li>
      <p>A，<code class="language-plaintext highlighter-rouge">Ljava/lang/String;</code>代表<code class="language-plaintext highlighter-rouge">String</code>参数，<code class="language-plaintext highlighter-rouge">I</code>代表<code class="language-plaintext highlighter-rouge">int</code>参数，<code class="language-plaintext highlighter-rouge">V</code>代表<code class="language-plaintext highlighter-rouge">void</code>返回类型。</p>
    </li>
    <li>
      <p>D，<code class="language-plaintext highlighter-rouge">this</code>引用允许实例方法在执行时访问和操作属于当前对象的字段和方法，它是实例方法能够工作的核心机制。</p>
    </li>
    <li>
      <p>A，Java虚拟机栈是线程私有的，每个线程都有自己的栈，用于存储方法调用时的栈帧。</p>
    </li>
    <li>
      <p>D，<code class="language-plaintext highlighter-rouge">NameAndType</code>条目将一个字段或方法的名称（UTF-8字符串）和其描述符（UTF-8字符串）关联起来，以便在<code class="language-plaintext highlighter-rouge">Fieldref</code>或<code class="language-plaintext highlighter-rouge">Methodref</code>中引用。</p>
    </li>
    <li>
      <p>D，<code class="language-plaintext highlighter-rouge">getfield</code>指令用于从操作数栈顶的对象引用中，获取指定实例字段的值并将其压入操作数栈。</p>
    </li>
    <li>
      <p>A，<code class="language-plaintext highlighter-rouge">ACC_FINAL</code>标志表示该类不能被继承，这与Java源代码中的<code class="language-plaintext highlighter-rouge">final</code>关键字修饰类是一致的。</p>
    </li>
    <li>
      <p>D，垃圾回收器自动识别并回收堆中不再被程序引用的对象所占用的内存空间，从而防止内存泄漏和提高内存利用率。</p>
    </li>
    <li>
      <p>D，Java虚拟机栈是线程私有的，每个方法调用都会创建一个栈帧，栈帧中包含局部变量表和操作数栈。</p>
    </li>
    <li>C , <img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250604164928254.png" alt="image-20250604164928254" style="zoom:50%;" />
      <blockquote>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>`Methodref`通过`Class`条目指定方法所属的类，通过`NameAndType`条目指定方法的名称和描述符。
</pre></td></tr></tbody></table></code></pre></div>        </div>
      </blockquote>
    </li>
    <li>
      <p>B ,<code class="language-plaintext highlighter-rouge">ACC_STATIC</code>标志表示该方法是静态方法，可以直接通过类名调用，不需要创建对象实例。</p>
    </li>
    <li>
      <p>B , <code class="language-plaintext highlighter-rouge">dup</code>指令用于复制操作数栈顶的一个或两个字（根据具体指令类型），并将其副本压入栈顶，常用于<code class="language-plaintext highlighter-rouge">new</code>指令之后来为构造器提供对象引用。</p>
    </li>
    <li>
      <p>B ,这是Java应用程序的入口方法，它接受一个<code class="language-plaintext highlighter-rouge">String</code>数组作为参数，并且没有返回值，与描述符完全匹配。</p>
    </li>
    <li>
      <p>B , 方法正常返回的典型操作是销毁并弹出其对应的栈帧，将控制权返回给调用者。</p>
    </li>
    <li>
      <p>D ,<code class="language-plaintext highlighter-rouge">Class</code>类型的常量池条目用于表示一个类或接口的全限定名，它会指向一个<code class="language-plaintext highlighter-rouge">Utf8</code>条目来存储实际的名称字符串。</p>
    </li>
    <li>
      <p>D , <code class="language-plaintext highlighter-rouge">putstatic</code>指令用于从操作数栈顶弹出一个值，并将其存储到指定的静态字段中</p>
    </li>
    <li>
      <p>B , <code class="language-plaintext highlighter-rouge">ACC_SYNCHRONIZED</code>标志表示该方法是同步的，JVM会在方法进入时自动获取对象监视器，并在方法退出时释放。</p>
    </li>
    <li>D ,  类加载机制：加载，链接（验证，准备，解析），初始化；类的生命周期：加载，链接，初始化，使用，卸载。</li>
  </ol>

</blockquote>



                <hr style="visibility: hidden;">
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2025/05/12/Java%E9%97%AD%E5%8C%85/" data-toggle="tooltip" data-placement="top" title="java闭包">
                        Previous<br>
                        <span>java闭包</span>
                        </a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2025/06/12/spring01%E5%9F%BA%E7%A1%80/" data-toggle="tooltip" data-placement="top" title="spring6-基础">
                        Next<br>
                        <span>spring6-基础</span>
                        </a>
                    </li>
                    
                </ul>
                <hr style="visibility: hidden;">

                

                
            </div>  

    <!-- Side Catalog Container -->
        
            <div class="
                col-lg-2 col-lg-offset-0
                visible-lg-block
                sidebar-container
                catalog-container">
                <div class="side-catalog">
                    <hr class="hidden-sm hidden-xs">
                    <h5>
                        <a class="catalog-toggle" href="#">CATALOG</a>
                    </h5>
                    <ul class="catalog-body"></ul>
                </div>
            </div>
        

    <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                


<section>
    
        <hr class="hidden-sm hidden-xs">
    
    <h5><a href="/archive/">FEATURED TAGS</a></h5>
    <div class="tags">
        
        
        
        
        
        
                <a data-sort="0144" 
                    href="/archive/?tag=%E4%B9%A6%E7%B1%8D%E9%98%85%E8%AF%BB"
                    title="书籍阅读"
                    rel="3">书籍阅读</a>
        
                <a data-sort="0123" 
                    href="/archive/?tag=%E7%AE%97%E6%B3%95"
                    title="算法"
                    rel="24">算法</a>
        
                <a data-sort="0129" 
                    href="/archive/?tag=%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BDAI%E5%9F%BA%E7%A1%80"
                    title="人工智能AI基础"
                    rel="18">人工智能AI基础</a>
        
                <a data-sort="0130" 
                    href="/archive/?tag=python%E5%9F%BA%E7%A1%80"
                    title="python基础"
                    rel="17">python基础</a>
        
                <a data-sort="0134" 
                    href="/archive/?tag=numpy"
                    title="numpy"
                    rel="13">numpy</a>
        
                <a data-sort="0134" 
                    href="/archive/?tag=pandas"
                    title="pandas"
                    rel="13">pandas</a>
        
                <a data-sort="0135" 
                    href="/archive/?tag=%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE"
                    title="机器学习-吴恩达"
                    rel="12">机器学习-吴恩达</a>
        
                <a data-sort="0137" 
                    href="/archive/?tag=%E5%8A%9B%E6%89%A3"
                    title="力扣"
                    rel="10">力扣</a>
        
                <a data-sort="0138" 
                    href="/archive/?tag=%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AE%97%E6%B3%95"
                    title="机器学习算法"
                    rel="9">机器学习算法</a>
        
                <a data-sort="0141" 
                    href="/archive/?tag=matplotlib"
                    title="matplotlib"
                    rel="6">matplotlib</a>
        
                <a data-sort="0144" 
                    href="/archive/?tag=spring6"
                    title="spring6"
                    rel="3">spring6</a>
        
                <a data-sort="0145" 
                    href="/archive/?tag=Java%E5%9F%BA%E7%A1%80"
                    title="Java基础"
                    rel="2">Java基础</a>
        
                <a data-sort="0145" 
                    href="/archive/?tag=ollama%E5%B7%A5%E5%85%B7"
                    title="ollama工具"
                    rel="2">ollama工具</a>
        
                <a data-sort="0145" 
                    href="/archive/?tag=python%E7%88%AC%E8%99%AB"
                    title="python爬虫"
                    rel="2">python爬虫</a>
    </div>
</section>


                <!-- Friends Blog -->
                
<hr>
<h5>FRIENDS</h5>
<ul class="list-inline">
  
  <li><a href="https://m.freebuf.com/">freebuf</a></li>
  
  <li><a href="https://xz.aliyun.com/">先知</a></li>
  
  <li><a href="https://www.sec-in.com/All">sec-in</a></li>
  
  <li><a href="https://paper.seebug.org/">see-bug</a></li>
  
  <li><a href="https://twitter.com/Concurr21486093">我的推特</a></li>
  
  <li><a href="https://pdai.tech/">pdai</a></li>
  
  <li><a href="https://nodejs.org/dist/">nodejs index of dist</a></li>
  
  <li><a href="#">公众号：小东方不败</a></li>
  
</ul>

            </div>
        </div>
    </div>
</article>

<!-- add support for mathjax by voleking-->









<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("//cdnjs.cloudflare.com/ajax/libs/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'right',
          // icon: '#'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <!-- SNS Link -->
                


<ul class="list-inline text-center">


  
  
  <li>
    <a href="https://twitter.com/Concurr21486093">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
  <li>
    <a target="_blank" href="https://www.zhihu.com/people/Hilda">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa  fa-stack-1x fa-inverse">知</i>
      </span>
    </a>
  </li>
  
  
  
  
  <li>
    <a target="_blank" href="https://github.com/kirsten-1">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-github fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
</ul>

                <p class="copyright text-muted">
                    Copyright &copy; Hilda 2025
                    <br>
                    Powered by <a href="https://kirsten-1.github.io/">hilda Blog</a>
<!--                    <iframe style="margin-left: 2px; margin-bottom:-5px;" frameborder="0" scrolling="0" width="100px"-->
<!--                        height="20px"-->
<!--                        src="https://ghbtns.com/github-btn.html?user=huxpro&repo=huxpro.github.io&type=star&count=true">-->
<!--                    </iframe>-->
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<!-- Currently, only navbar scroll-down effect at desktop still depends on this -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js "></script>

<!-- Simple Jekyll Search -->
<script src="/js/simple-jekyll-search.min.js"></script>

<!-- Service Worker -->

<script src="/js/snackbar.js "></script>
<script src="/js/sw-registration.js "></script>


<!-- async load function -->
<script>
    function async(u, c) {
        var d = document, t = 'script',
            o = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        o.src = u;
        if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
        s.parentNode.insertBefore(o, s);
    }
</script>

<!--
     Because of the native support for backtick-style fenced code blocks
     right within the Markdown is landed in Github Pages,
     From V1.6, There is no need for Highlight.js,
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/
     - https://github.com/jneen/rouge/wiki/list-of-supported-languages-and-lexers
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->







<!--fastClick.js -->
<script>
    async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function () {
        var $nav = document.querySelector("nav");
        if ($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->



<!-- Baidu Tongji -->



<!-- Side Catalog -->

<script type="text/javascript">
    function generateCatalog(selector) {

        // interop with multilangual 
        if ('' == 'true') {
            _containerSelector = 'div.post-container.active'
        } else {
            _containerSelector = 'div.post-container'
        }

        // init
        var P = $(_containerSelector), a, n, t, l, i, c;
        a = P.find('h1,h2,h3,h4,h5,h6');

        // clean
        $(selector).html('')

        // appending
        a.each(function () {
            n = $(this).prop('tagName').toLowerCase();
            i = "#" + $(this).prop('id');
            t = $(this).text();
            c = $('<a href="' + i + '" rel="nofollow">' + t + '</a>');
            l = $('<li class="' + n + '_nav"></li>').append(c);
            $(selector).append(l);
        });
        return true;
    }

    generateCatalog(".catalog-body");

    // toggle side catalog
    $(".catalog-toggle").click((function (e) {
        e.preventDefault();
        $('.side-catalog').toggleClass("fold")
    }))

    /*
     * Doc: https://github.com/davist11/jQuery-One-Page-Nav
     * Fork by Hux to support padding
     */
    async("/js/jquery.nav.js", function () {
        $('.catalog-body').onePageNav({
            currentClass: "active",
            changeHash: !1,
            easing: "swing",
            filter: "",
            scrollSpeed: 700,
            scrollOffset: 0,
            scrollThreshold: .2,
            begin: null,
            end: null,
            scrollChange: null,
            padding: 80
        });
    });
</script>



<!-- Multi-Lingual -->


<!-- Simple Jekyll Search -->
<script>
    // https://stackoverflow.com/questions/1912501/unescape-html-entities-in-javascript
    function htmlDecode(input) {
        var e = document.createElement('textarea');
        e.innerHTML = input;
        // handle case of empty input
        return e.childNodes.length === 0 ? "" : e.childNodes[0].nodeValue;
    }

    SimpleJekyllSearch({
        searchInput: document.getElementById('search-input'),
        resultsContainer: document.getElementById('search-results'),
        json: '/search.json',
        searchResultTemplate: '<div class="post-preview item"><a href="{url}"><h2 class="post-title">{title}</h2><h3 class="post-subtitle">{subtitle}</h3><hr></a></div>',
        noResultsText: 'No results',
        limit: 50,
        fuzzy: false,
        // a hack to get escaped subtitle unescaped. for some reason, 
        // post.subtitle w/o escape filter nuke entire search.
        templateMiddleware: function (prop, value, template) {
            if (prop === 'subtitle' || prop === 'title') {
                if (value.indexOf("code")) {
                    return htmlDecode(value);
                } else {
                    return value;
                }
            }
        }
    });

    $(document).ready(function () {
        var $searchPage = $('.search-page');
        var $searchOpen = $('.search-icon');
        var $searchClose = $('.search-icon-close');
        var $searchInput = $('#search-input');
        var $body = $('body');

        $searchOpen.on('click', function (e) {
            e.preventDefault();
            $searchPage.toggleClass('search-active');
            var prevClasses = $body.attr('class') || '';
            setTimeout(function () {
                $body.addClass('no-scroll');
            }, 400)

            if ($searchPage.hasClass('search-active')) {
                $searchClose.on('click', function (e) {
                    e.preventDefault();
                    $searchPage.removeClass('search-active');
                    $body.attr('class', prevClasses);  // from closure 
                });
                $searchInput.focus();
            }
        });
    });
</script>


<!-- Image to hack wechat -->
<img src="/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
