<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="description" content="这里是 Hilda 的个人博客，与你一起发现更大的世界 | 要做一个有 swag 的程序员">
    <meta name="keywords" content="Hilda">
    <meta name="theme-color" content="#000000">

    <!-- Open Graph -->
    <meta property="og:title"
        content="python基础-面向对象编程(2) - Hilda的博客 | Your genius girlfriend's blog">
    
    <meta property="og:type" content="article">
    <meta property="og:description" content="

">
    
    <meta property="article:published_time" content=" 2025-07-09T00:00:00Z">
    
    
    <meta property="article:author" content="Hilda">
    
    
    <meta property="article:tag" content="python基础">
    
    
    <meta property="og:image" content="https://kirsten-1.github.io">
    <meta property="og:url" content="https://kirsten-1.github.io/2025/07/09/python%E5%9F%BA%E7%A1%8013%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B(2)/">
    <meta property="og:site_name" content="Hilda的博客 | Your genius girlfriend's blog">

    <title>python基础-面向对象编程(2) - Hilda的博客 | Your genius girlfriend's blog</title>

    <!-- Web App Manifest -->
    <link rel="manifest" href="/pwa/manifest.json">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/img/favicon.ico">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://kirsten-1.github.io/2025/07/09/python%E5%9F%BA%E7%A1%8013%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B(2)/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href=" /css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href=" /css/hux-blog.min.css">

    <!-- Custom Fonts -->
    <!-- <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet"
        type="text/css">


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>

    <!-- Google AdSense -->
    <script data-ad-client="ca-pub-6487568398225121" async
        src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- Navigation -->

    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">Hilda</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div id="huxblog_navbar">
                <div class="navbar-collapse">
                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="/">Home</a>
                        </li>
                        
                        
                        
                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                        
                        
                        <li>
                            <a href="/archive/">Archive</a>
                        </li>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <li class="search-icon">
                            <a href="javascript:void(0)">
                                <i class="fa fa-search"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <script>
        // Drop Bootstarp low-performance Navbar
        // Use customize navbar with high-quality material design animation
        // in high-perf jank-free CSS3 implementation
        var $body = document.body;
        var $toggle = document.querySelector('.navbar-toggle');
        var $navbar = document.querySelector('#huxblog_navbar');
        var $collapse = document.querySelector('.navbar-collapse');

        var __HuxNav__ = {
            close: function () {
                $navbar.className = " ";
                // wait until animation end.
                setTimeout(function () {
                    // prevent frequently toggle
                    if ($navbar.className.indexOf('in') < 0) {
                        $collapse.style.height = "0px"
                    }
                }, 400)
            },
            open: function () {
                $collapse.style.height = "auto"
                $navbar.className += " in";
            }
        }

        // Bind Event
        $toggle.addEventListener('click', function (e) {
            if ($navbar.className.indexOf('in') > 0) {
                __HuxNav__.close()
            } else {
                __HuxNav__.open()
            }
        })

        /**
         * Since Fastclick is used to delegate 'touchstart' globally
         * to hack 300ms delay in iOS by performing a fake 'click',
         * Using 'e.stopPropagation' to stop 'touchstart' event from 
         * $toggle/$collapse will break global delegation.
         * 
         * Instead, we use a 'e.target' filter to prevent handler
         * added to document close HuxNav.  
         *
         * Also, we use 'click' instead of 'touchstart' as compromise
         */
        document.addEventListener('click', function (e) {
            if (e.target == $toggle) return;
            if (e.target.className == 'icon-bar') return;
            __HuxNav__.close();
        })
    </script>
    <!-- Search -->
<div class="search-page">
  <div class="search-icon-close-container">
    <span class="search-icon-close">
      <i class="fa fa-chevron-down"></i>
    </span>
  </div>
  <div class="search-main container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <form></form>
        <input type="text" id="search-input" placeholder="$ grep...">
        </form>
        <div id="search-results" class="mini-post-list"></div>
      </div>
    </div>
  </div>
</div>

    <!-- Image to hack wechat -->
<!-- <img src="/img/icon_wechat.png" width="0" height="0"> -->
<!-- <img src="/img/post-bg-2015.jpg" width="0" height="0"> -->

<!-- Post Header -->



<style type="text/css">
    header.intro-header{
        position: relative;
        background-image: url('/img/post-bg-2015.jpg');
        background: ;
    }

    
</style>




<header class="intro-header" >

    <div class="header-mask"></div>
    
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/archive/?tag=python%E5%9F%BA%E7%A1%80" title="python基础">python基础</a>
                        
                    </div>
                    <h1>python基础-面向对象编程(2)</h1>
                    
                    <h2 class="subheading">介绍面向对象编程三大特性：封装（数据与方法捆绑，隐藏实现细节，强调高内聚低耦合）、继承（代码重用，子类继承父类属性与方法）、多态（同一接口多种实现，鸭子类型与抽象基类）。通过Python代码示例，展示封装、继承、多态、方法重写、object类及特殊方法与属性</h2>
                    <span class="meta">Posted by Hilda on July 9, 2025</span>
                </div>
            </div>
        </div>
    </div>
</header>







<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

    <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <!-- Multi-Lingual -->
                

				<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG">
</script>

<h1 id="1封装">1、封装</h1>

<p><img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250703170013103.png" alt="image-20250703170013103" style="zoom:50%;" /></p>

<p>封装是面向对象编程的三大核心特性之一（另两个是继承和多态）。它指的是将数据（属性）和操作数据的方法（行为）捆绑在一起，形成一个独立的单元——对象。同时，封装也强调对内部实现细节的隐藏，只对外提供有限且明确的接口，以保护数据的完整性和安全性。</p>

<p>封装的核心思想是“高内聚，低耦合”。</p>

<p>● <strong>高内聚：</strong> 指一个模块内部的元素（数据和方法）彼此紧密相关，共同完成一个单一的、明确的功能。</p>

<p>● <strong>低耦合：</strong> 指模块之间相互依赖的程度低，一个模块的改变对其他模块的影响尽可能小。</p>

<p>在Python中，封装的实现主要依赖于以下几个方面：</p>

<ul>
  <li>
    <p><strong>捆绑数据和方法：</strong> 这是通过在类中定义属性和方法自然实现的。一个 Person 类会包含 name, age 等属性，以及 walk(), eat() 等方法，这些都属于 Person 对象。</p>
  </li>
  <li>
    <p><strong>信息隐藏（访问控制）：</strong> 这是封装的关键部分。Python不像Java或C++那样提供严格的 private 或 protected 关键字来强制限制访问。Python采用的是一种<strong>约定俗成</strong>的访问控制机制：</p>

    <ul>
      <li>
        <p><strong>公共成员 (Public Members)：</strong> 任何不以一个或两个下划线开头的属性和方法都被认为是公共的，可以从类的外部直接访问。这是Python中默认的访问级别。</p>
      </li>
      <li>
        <p><strong>受保护成员 (Protected Members)：</strong> 以一个下划线 <code class="language-plaintext highlighter-rouge">_</code> 开头的属性和方法（例如 <code class="language-plaintext highlighter-rouge">_protected_attribute</code> 或 <code class="language-plaintext highlighter-rouge">_protected_method()</code>）被约定为“受保护的”。这意味着它们应该被视为类的内部实现细节，不鼓励从外部直接访问，但从技术上讲，它们仍然是可访问的。这是一种给开发者看的信号。</p>
      </li>
      <li>
        <p><strong>私有成员 (Private Members)：</strong> 以两个下划线<code class="language-plaintext highlighter-rouge"> __</code> 开头（但不能以两个下划线结尾，例如<code class="language-plaintext highlighter-rouge"> __private_attribute</code> 或 <code class="language-plaintext highlighter-rouge">__private_method()</code>）的属性和方法被约定为“私有的”。Python解释器会对这类名称进行<strong>名称修饰（Name Mangling）</strong>，使其在类的外部难以直接访问。</p>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>属性访问器 (Getters/Setters) 和 @property 装饰器：</strong></p>

    <ul>
      <li>
        <p>虽然Python不强制私有化，但为了更好地控制属性的读取和写入，通常会使用 getter 和 setter 方法。</p>
      </li>
      <li>
        <p>Python提供了 <code class="language-plaintext highlighter-rouge">@property</code> 装饰器，可以将一个方法伪装成属性，从而在不改变外部访问方式的情况下，在内部对属性的读写进行逻辑控制和验证。这使得属性的访问方式更加“Pythonic”。</p>
      </li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>● <strong>名称修饰 (Name Mangling) 的原理：</strong> 当Python解释器遇到以双下划线 <code class="language-plaintext highlighter-rouge">__ </code>开头（且不以双下划线结尾）的属性或方法名时，它会在编译阶段将其名称进行修改，变为<code class="language-plaintext highlighter-rouge"> _ClassName__attribute_name </code>的形式。例如，<code class="language-plaintext highlighter-rouge">__private_attribute </code>在 MyClass 中会被转换为<code class="language-plaintext highlighter-rouge"> _MyClass__private_attribute</code>。这种机制使得从外部直接通过<code class="language-plaintext highlighter-rouge"> obj.__private_attribute </code>访问变得困难，因为外部代码并不知道这个被修饰后的名称。但如果知道修饰后的名称，仍然可以访问（这说明Python的“私有”是约定而非强制）。</p>

  <p>● <strong><code class="language-plaintext highlighter-rouge">@property</code> 装饰器的原理：</strong> <code class="language-plaintext highlighter-rouge">@property</code> 是一个内置装饰器，它将一个方法转换为一个属性访问器。当你在类中定义一个 <code class="language-plaintext highlighter-rouge">@property </code>方法时，它实际上创建了一个 property 对象。这个 property 对象内部包含了三个可选的方法：</p>

  <p>○ fget：用于获取属性值（<code class="language-plaintext highlighter-rouge">@property</code> 装饰的方法）。</p>

  <p>○ fset：用于设置属性值（通过 <code class="language-plaintext highlighter-rouge">@&lt;property_name&gt;.setter </code>装饰的方法）。</p>

  <p>○ fdel：用于删除属性值（通过 <code class="language-plaintext highlighter-rouge">@&lt;property_name&gt;.deleter </code>装饰的方法）。
当你通过 <code class="language-plaintext highlighter-rouge">obj.attribute </code>访问时，实际上是调用了 fget 方法；当你通过<code class="language-plaintext highlighter-rouge"> obj.attribute = value</code> 赋值时，实际上是调用了 fset 方法。这使得你可以在属性的读写操作中嵌入自定义逻辑，实现更精细的封装。</p>
</blockquote>

<hr />

<p>来看一个例子：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
</pre></td><td class="rouge-code"><pre><span class="c1"># 博客地址: https://kirsten-1.github.io/
# 创建者: kirsten-1
# 时间: 2025/7/3  17:08
</span>

<span class="k">class</span> <span class="nc">BankAccount</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">initial_balance</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">balance</span> <span class="o">=</span> <span class="n">initial_balance</span>
        <span class="c1"># 受保护成员：以单下划线开头，约定为内部使用
</span>        <span class="n">self</span><span class="p">.</span><span class="n">_account_number</span> <span class="o">=</span> <span class="sh">"</span><span class="s">123456789</span><span class="sh">"</span>
        <span class="c1"># 私有成员：以双下划线开头，Python会进行名称修饰
</span>        <span class="n">self</span><span class="p">.</span><span class="n">__balance</span> <span class="o">=</span> <span class="n">initial_balance</span> <span class="c1"># 实际存储余额的“私有”属性
</span>
    <span class="c1"># 使用 @property 实现对 __balance 的封装
</span>    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">balance</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">
        getter 方法：允许外部通过属性方式访问余额，但可以在内部添加逻辑。
        </span><span class="sh">"""</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">正在获取余额...</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">__balance</span>

    <span class="nd">@balance.setter</span>
    <span class="k">def</span> <span class="nf">balance</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">
        setter 方法：允许外部通过属性方式设置余额，但可以在内部进行验证。
        </span><span class="sh">"""</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nf">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="nc">TypeError</span><span class="p">(</span><span class="sh">"</span><span class="s">余额必须是数字！</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">警告: 余额不能为负数，已重置为 0。</span><span class="sh">"</span><span class="p">)</span>
            <span class="n">self</span><span class="p">.</span><span class="n">__balance</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">正在调用setter方法...</span><span class="sh">"</span><span class="p">)</span>
            <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">正在设置余额为</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
            <span class="n">self</span><span class="p">.</span><span class="n">__balance</span> <span class="o">=</span> <span class="n">value</span>

    <span class="c1"># 公共方法，提供操作数据的接口
</span>    <span class="k">def</span> <span class="nf">deposit</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">
        存款操作
        </span><span class="sh">"""</span>
        <span class="k">if</span> <span class="n">amount</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">存款金额不可小于等于0</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">self</span><span class="p">.</span><span class="n">balance</span> <span class="o">+=</span> <span class="n">amount</span>  <span class="c1"># 通过 setter 修改余额
</span>            <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">已经成功存款:</span><span class="si">{</span><span class="n">amount</span><span class="si">}</span><span class="s">元，现余额:</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">balance</span><span class="si">}</span><span class="s">元</span><span class="sh">"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">withdraw</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">
        取款操作
        </span><span class="sh">"""</span>
        <span class="k">if</span> <span class="n">amount</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">self</span><span class="p">.</span><span class="n">balance</span> <span class="o">&gt;=</span> <span class="n">amount</span><span class="p">:</span>
            <span class="n">self</span><span class="p">.</span><span class="n">balance</span> <span class="o">-=</span> <span class="n">amount</span>
            <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">已经成功取款</span><span class="si">{</span><span class="n">amount</span><span class="si">}</span><span class="s">元，现余额:</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">balance</span><span class="si">}</span><span class="s">元</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">余额不足，无法取出 </span><span class="si">{</span><span class="n">amount</span><span class="si">}</span><span class="s"> 元。当前余额: </span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">balance</span><span class="si">}</span><span class="s"> 元。</span><span class="sh">"</span><span class="p">)</span>

    <span class="c1"># 演示受保护方法
</span>    <span class="k">def</span> <span class="nf">_log_transaction</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">transaction_type</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">受保护的方法，用于内部记录交易日志。</span><span class="sh">"""</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">内部日志: </span><span class="si">{</span><span class="n">transaction_type</span><span class="si">}</span><span class="s"> </span><span class="si">{</span><span class="n">amount</span><span class="si">}</span><span class="s"> 元。</span><span class="sh">"</span><span class="p">)</span>

    <span class="c1"># 演示私有方法
</span>    <span class="k">def</span> <span class="nf">__calculate_interest</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">私有方法，计算利息（仅供内部使用）。</span><span class="sh">"""</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">正在秘密计算利息...</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">__balance</span> <span class="o">*</span> <span class="mf">0.01</span>

    <span class="k">def</span> <span class="nf">apply_monthly_interest</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">公共方法，调用私有方法。</span><span class="sh">"""</span>
        <span class="n">interest</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">__calculate_interest</span><span class="p">()</span>
        <span class="n">self</span><span class="p">.</span><span class="n">balance</span> <span class="o">+=</span> <span class="n">interest</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">已应用月利息:</span><span class="si">{</span><span class="n">interest</span><span class="si">}</span><span class="s">元</span><span class="sh">"</span><span class="p">)</span>


<span class="n">account</span> <span class="o">=</span> <span class="nc">BankAccount</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="c1"># 访问属性 (通过 @property 调用的 getter)
</span><span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">当前余额:</span><span class="si">{</span><span class="n">account</span><span class="p">.</span><span class="n">balance</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="c1"># 修改属性 (通过 @property 调用的 setter)
</span><span class="n">account</span><span class="p">.</span><span class="n">balance</span> <span class="o">=</span> <span class="mi">1200</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">当前余额:</span><span class="si">{</span><span class="n">account</span><span class="p">.</span><span class="n">balance</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="c1"># 触发setter中的验证逻辑
</span><span class="n">account</span><span class="p">.</span><span class="n">balance</span> <span class="o">=</span> <span class="o">-</span><span class="mi">200</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">当前余额:</span><span class="si">{</span><span class="n">account</span><span class="p">.</span><span class="n">balance</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># 调用公用方法
</span><span class="n">account</span><span class="p">.</span><span class="nf">deposit</span><span class="p">(</span><span class="mi">300</span><span class="p">)</span>
<span class="n">account</span><span class="p">.</span><span class="nf">withdraw</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
<span class="n">account</span><span class="p">.</span><span class="nf">withdraw</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
<span class="n">account</span><span class="p">.</span><span class="nf">apply_monthly_interest</span><span class="p">()</span>

<span class="c1"># 尝试访问 受保护成员（技术上可行，但是不推荐）
</span><span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">账户号码（受保护）:</span><span class="si">{</span><span class="n">account</span><span class="p">.</span><span class="n">_account_number</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># 尝试直接访问私有成员（失败，因为名称已经被修饰）
</span><span class="k">try</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">account</span><span class="p">.</span><span class="n">__balnace</span><span class="p">)</span>
<span class="k">except</span> <span class="nb">AttributeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">报错:</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># 尝试访问被名称修饰之后的私有成员（不推荐）
</span><span class="nf">print</span><span class="p">(</span><span class="n">account</span><span class="p">.</span><span class="n">_BankAccount__balance</span><span class="p">)</span>


</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250706205645817.png" alt="image-20250706205645817" style="zoom:50%;" /></p>

<h1 id="2继承">2、继承</h1>

<p>面向对象编程的另一个核心特性是继承，它允许一个类（子类/派生类）从另一个类（父类/基类）中获取（继承）属性和方法。继承促进代码重用，建立了类之间<code class="language-plaintext highlighter-rouge">is a</code>的关系（比如，狗是一种动物）</p>

<p>继承是实现代码重用和构建类层次结构的关键机制。</p>

<ul>
  <li>父类：被继承的类，定义了通用的属性和行为。</li>
  <li>子类：继承父类的类。子类会自动拥有父类的所有公共和受保护属性及方法。子类可以在继承的基础上添加新的属性和方法，或者重写（覆盖）父类的方法以改变其行为。</li>
  <li><code class="language-plaintext highlighter-rouge">is a</code>的关系：继承表达的是一种<code class="language-plaintext highlighter-rouge">is a</code>的关系，比如狗是一种动物等等。</li>
</ul>

<p>Python中的继承：</p>

<ul>
  <li>单继承：一个子类只继承一个父类，语法就是<code class="language-plaintext highlighter-rouge">class ChildClass(ParentClass):</code></li>
  <li>多重继承：一个子类可以继承多个父类，语法是<code class="language-plaintext highlighter-rouge">class ChildClass(ParentClass1, ParentClass2):</code>
    <ul>
      <li>注意：菱形问题，即当一个类从2个或者更多父类继承，而这些父类又共同继承自同一个祖先类时，方法解析顺序会变得复杂。Python通过MRO（Method Resolution Order）来解决这个问题</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">super()</code>函数：用于调用父类（或更广义地说，MRO中的下一个类）的方法。最常见的用法是在子类的<code class="language-plaintext highlighter-rouge"> __init__ </code>方法中调用父类的<code class="language-plaintext highlighter-rouge"> __init__ </code>方法，以确保父类的属性得到正确初始化。
    <ul>
      <li>语法：<code class="language-plaintext highlighter-rouge">super().__init__(args) </code>或<code class="language-plaintext highlighter-rouge"> super().method_name(args)</code>。</li>
      <li><code class="language-plaintext highlighter-rouge">super()</code> 并不是简单地调用“父类”的方法，它根据当前类的MRO来确定下一个要调用的类。这使得它在多重继承中非常有用，能够确保所有父类的初始化方法都被调用，并且方法调用遵循正确的顺序。</li>
    </ul>
  </li>
</ul>

<p><strong>isinstance() 和 issubclass()：</strong></p>

<p>● isinstance(obj, Class)：检查 obj 是否是 Class 的实例，或者 Class 的子类的实例。</p>

<p>● issubclass(SubClass, SuperClass)：检查 SubClass 是否是 SuperClass 的子类（包括自身）。</p>

<blockquote>
  <p>● <strong>属性和方法的查找：</strong> 当你通过一个实例调用方法或访问属性时（例如 <code class="language-plaintext highlighter-rouge">dog_instance.bark()</code>），Python会首先在实例自身的 <code class="language-plaintext highlighter-rouge">__dict__ </code>中查找。如果找不到，它会沿着该实例所属类的MRO（Method Resolution Order）链向上查找。MRO 定义了类及其所有父类（包括多重继承中的所有基类）的搜索顺序。</p>

  <p>● <strong>MRO (Method Resolution Order) 的原理：</strong></p>

  <p>○ MRO 是一个线性化的列表，它决定了Python在查找方法或属性时，应该按照什么顺序遍历一个类的继承层次结构。</p>

  <p>○ 对于单继承，MRO很简单，就是<code class="language-plaintext highlighter-rouge">当前类 -&gt; 父类 -&gt; 祖父类 -&gt; ... -&gt; object</code>。</p>

  <p>○ 对于多重继承，Python 3 及其以后的版本使用 C3 线性化算法来计算MRO。C3算法保证了以下几点：</p>

  <ul>
    <li>子类优先于父类。</li>
    <li>多个父类之间的顺序保留（按照在类定义中出现的顺序）。</li>
    <li>单调性（如果一个类在MRO中出现在另一个类之前，那么在所有继承自它们的子类的MRO中，这个顺序也会保持）。</li>
  </ul>

  <p>○ 你可以通过<code class="language-plaintext highlighter-rouge"> ClassName.__mro__ </code>属性或<code class="language-plaintext highlighter-rouge"> help(ClassName) </code>来查看一个类的MRO。</p>

  <p>● <strong>super() 的原理：</strong> super() 函数返回一个代理对象（proxy object），它能够根据当前类的MRO来查找并调用下一个类的方法。它不是简单地调用父类的方法，而是调用MRO中当前类之后（下一个）的类的方法。这在多重继承中尤为重要，因为它确保了所有共同祖先的方法都能被正确调用，避免了重复调用和遗漏。</p>
</blockquote>

<h2 id="1单继承">（1）单继承</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre></td><td class="rouge-code"><pre><span class="c1"># 博客地址: https://kirsten-1.github.io/
# 创建者: kirsten-1
# 时间: 2025/7/8  12:37
</span>

<span class="k">class</span> <span class="nc">Animal</span><span class="p">:</span>
    <span class="sh">"""</span><span class="s">
    父类：动物
    </span><span class="sh">"""</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">动物:</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">实例创建好了</span><span class="sh">"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">speak</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">
        动物发声通用的方法
        </span><span class="sh">"""</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">发出声音...</span><span class="sh">"</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Dog</span><span class="p">(</span><span class="n">Animal</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">breed</span><span class="p">):</span>
        <span class="c1"># 调用父类的构造函数，初始化父类的属性
</span>        <span class="nf">super</span><span class="p">().</span><span class="nf">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">breed</span> <span class="o">=</span> <span class="n">breed</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Dog</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">(</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">breed</span><span class="si">}</span><span class="s">)实例创建好了</span><span class="sh">"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">bark</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">
        狗的特有的行为
        </span><span class="sh">"""</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">bark 很大声...</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># 创建子类的实例
</span><span class="n">my_dog</span> <span class="o">=</span> <span class="nc">Dog</span><span class="p">(</span><span class="sh">"</span><span class="s">Buddy</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Golden Retriever</span><span class="sh">"</span><span class="p">)</span>
<span class="n">my_dog</span><span class="p">.</span><span class="nf">speak</span><span class="p">()</span>  <span class="c1"># 调用继承自Animal的方法
</span><span class="n">my_dog</span><span class="p">.</span><span class="nf">bark</span><span class="p">()</span>  <span class="c1"># 调用Dog自己的方法
</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">my_dog是Animal的实例吗？</span><span class="si">{</span><span class="nf">isinstance</span><span class="p">(</span><span class="n">my_dog</span><span class="p">,</span> <span class="n">Animal</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Dog是Animal的子类吗？</span><span class="si">{</span><span class="nf">issubclass</span><span class="p">(</span><span class="n">Dog</span><span class="p">,</span> <span class="n">Animal</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>


</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250708124518785.png" alt="image-20250708124518785" style="zoom:50%;" /></p>

<h2 id="2多重继承">（2）多重继承</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre></td><td class="rouge-code"><pre><span class="c1"># 博客地址: https://kirsten-1.github.io/
# 创建者: kirsten-1
# 时间: 2025/7/8  12:49
</span>

<span class="k">class</span> <span class="nc">Flyer</span><span class="p">:</span>
    <span class="sh">"""</span><span class="s">
    父类：会飞的生物
    </span><span class="sh">"""</span>
    <span class="k">def</span> <span class="nf">fly</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">我会飞...</span><span class="sh">"</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Swimmer</span><span class="p">:</span>
    <span class="sh">"""</span><span class="s">
    父类：会游泳的生物
    </span><span class="sh">"""</span>
    <span class="k">def</span> <span class="nf">swim</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">我会游泳...</span><span class="sh">"</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Duck</span><span class="p">(</span><span class="n">Flyer</span><span class="p">,</span> <span class="n">Swimmer</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">
    子类：鸭子，同时继承Flyer和Swimmer
    </span><span class="sh">"""</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">鸭子:</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">实例创建好了...</span><span class="sh">"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">quack</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">
        鸭子叫的方法
        </span><span class="sh">"""</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">嘎嘎叫</span><span class="sh">"</span><span class="p">)</span>

<span class="n">my_duck</span> <span class="o">=</span> <span class="nc">Duck</span><span class="p">(</span><span class="sh">"</span><span class="s">Donald</span><span class="sh">"</span><span class="p">)</span>
<span class="n">my_duck</span><span class="p">.</span><span class="nf">quack</span><span class="p">()</span>
<span class="n">my_duck</span><span class="p">.</span><span class="nf">fly</span><span class="p">()</span>  <span class="c1"># 继承自Flyer的方法
</span><span class="n">my_duck</span><span class="p">.</span><span class="nf">swim</span><span class="p">()</span>  <span class="c1"># 继承自Swimmer的方法
</span><span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Duck的MRO：</span><span class="si">{</span><span class="n">Duck</span><span class="p">.</span><span class="n">__mro__</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250708125518619.png" alt="image-20250708125518619" style="zoom:50%;" /></p>

<h2 id="3菱形问题mro">（3）菱形问题(MRO)</h2>

<p>下面例子中，确保A的m1方法只被调用一次，避免了菱形问题的中的重复调用。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre></td><td class="rouge-code"><pre><span class="c1"># 博客地址: https://kirsten-1.github.io/
# 创建者: kirsten-1
# 时间: 2025/7/8  12:55
</span>

<span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">m1</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">类A的m1方法被调用...</span><span class="sh">"</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">m1</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">类B的m1方法被调用...</span><span class="sh">"</span><span class="p">)</span>
        <span class="nf">super</span><span class="p">().</span><span class="nf">m1</span><span class="p">()</span>  <span class="c1"># 调用A的m1方法
</span>
<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">m1</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">类C的m1方法被调用...</span><span class="sh">"</span><span class="p">)</span>
        <span class="nf">super</span><span class="p">().</span><span class="nf">m1</span><span class="p">()</span>  <span class="c1"># 调用A的m1方法
</span>
<span class="k">class</span> <span class="nc">D</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">m1</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">类D的m1方法被调用...</span><span class="sh">"</span><span class="p">)</span>
        <span class="nf">super</span><span class="p">().</span><span class="nf">m1</span><span class="p">()</span>  <span class="c1"># 调用A的m1方法
</span>
<span class="n">d</span> <span class="o">=</span> <span class="nc">D</span><span class="p">()</span>
<span class="n">d</span><span class="p">.</span><span class="nf">m1</span><span class="p">()</span>

<span class="nf">print</span><span class="p">(</span><span class="n">D</span><span class="p">.</span><span class="n">__mro__</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250708132119321.png" alt="image-20250708132119321" style="zoom:50%;" /></p>

<h1 id="3方法重写">3、方法重写</h1>

<p>方法重写（Method Overriding）是指子类定义了一个与父类中同名的方法，以提供自己特有的实现。当通过子类实例调用该方法时，会执行子类中的版本，而不是父类中的版本。</p>

<p>方法重写是继承机制的重要组成部分，它允许子类修改或扩展父类的行为，以适应更具体的场景。</p>

<p>● <strong>目的：</strong></p>

<p>○ <strong>特殊化行为：</strong> 子类需要对父类提供的通用行为进行定制。</p>

<p>○ <strong>扩展功能：</strong> 在保留父类原有功能的基础上，添加额外的逻辑。</p>

<p>○ <strong>实现抽象方法：</strong> 如果父类定义了抽象方法（通过 abc 模块），子类必须重写这些方法才能被实例化。</p>

<p>● <strong>调用父类被重写的方法：</strong></p>

<p>○ 在子类重写的方法中，你可能仍然需要调用父类中被重写的方法，以保留其原有功能，并在其基础上进行扩展。</p>

<p>○ 这通常通过 <code class="language-plaintext highlighter-rouge">super().method_name(args) </code>来实现。</p>

<p>○ 也可以直接通过 <code class="language-plaintext highlighter-rouge">ParentClassName.method_name(self, args) </code>来调用，但 <code class="language-plaintext highlighter-rouge">super() </code>更推荐，因为它在多重继承中能正确处理MRO。</p>

<blockquote>
  <p>● <strong>属性查找机制 (MRO) 的作用：</strong> 当你通过一个子类实例调用一个方法时（例如 <code class="language-plaintext highlighter-rouge">child_obj.some_method()</code>），Python会按照该子类的MRO（Method Resolution Order）来查找<code class="language-plaintext highlighter-rouge"> some_method</code>。</p>

  <ul>
    <li>首先，它会在子类自身的<code class="language-plaintext highlighter-rouge"> __dict__ </code>中查找<code class="language-plaintext highlighter-rouge"> some_method</code>。</li>
    <li>如果子类定义了<code class="language-plaintext highlighter-rouge"> some_method</code>（即重写了它），那么就会找到并执行子类中的这个方法。</li>
    <li>如果子类没有定义，它会沿着MRO向上到父类、祖父类等，直到找到第一个定义了 <code class="language-plaintext highlighter-rouge">some_method </code>的类，然后执行那个方法。</li>
  </ul>

  <p>● <strong>动态分派 (Dynamic Dispatch)：</strong> 这就是多态的基础。Python在运行时才决定调用哪个具体的方法实现。它不会在编译时就确定，而是根据实际调用方法的对象的类型来查找并执行对应的方法。这种机制使得代码更加灵活，因为你可以用统一的接口（方法名）来操作不同类型的对象，而每个对象会根据自己的类型执行不同的行为。</p>
</blockquote>

<hr />

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
</pre></td><td class="rouge-code"><pre><span class="c1"># 博客地址: https://kirsten-1.github.io/
# 创建者: kirsten-1
# 时间: 2025/7/8  13:54
</span>
<span class="k">class</span> <span class="nc">Animal</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">动物</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">实例被创建</span><span class="sh">"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">speak</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">
        动物发声的通用方法
        </span><span class="sh">"""</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s"> 发出声音...</span><span class="sh">"</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Dog</span><span class="p">(</span><span class="n">Animal</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">breed</span><span class="p">):</span>
        <span class="nf">super</span><span class="p">().</span><span class="nf">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">breed</span> <span class="o">=</span> <span class="n">breed</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">狗</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">-</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">breed</span><span class="si">}</span><span class="s">实例被创建了...</span><span class="sh">"</span><span class="p">)</span>

    <span class="c1"># 重写父类的speak方法
</span>    <span class="k">def</span> <span class="nf">speak</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">-</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">breed</span><span class="si">}</span><span class="s">汪汪叫...</span><span class="sh">"</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Cat</span><span class="p">(</span><span class="n">Animal</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
        <span class="nf">super</span><span class="p">().</span><span class="nf">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="c1"># 重写父类的speak方法，并且调用父类的方法
</span>    <span class="k">def</span> <span class="nf">speak</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="nf">super</span><span class="p">().</span><span class="nf">speak</span><span class="p">()</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">喵喵叫</span><span class="sh">"</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Bird</span><span class="p">(</span><span class="n">Animal</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">
    不重写speak方法
    </span><span class="sh">"""</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="nf">super</span><span class="p">().</span><span class="nf">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

<span class="n">animal</span> <span class="o">=</span> <span class="nc">Animal</span><span class="p">(</span><span class="sh">"</span><span class="s">通用动物</span><span class="sh">"</span><span class="p">)</span>
<span class="n">dog</span> <span class="o">=</span> <span class="nc">Dog</span><span class="p">(</span><span class="sh">"</span><span class="s">Buddy</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Golden Retriever</span><span class="sh">"</span><span class="p">)</span>
<span class="n">cat</span> <span class="o">=</span> <span class="nc">Cat</span><span class="p">(</span><span class="sh">"</span><span class="s">Whiskers</span><span class="sh">"</span><span class="p">)</span>
<span class="n">bird</span> <span class="o">=</span> <span class="nc">Bird</span><span class="p">(</span><span class="sh">"</span><span class="s">Tweety</span><span class="sh">"</span><span class="p">)</span>

<span class="n">animal</span><span class="p">.</span><span class="nf">speak</span><span class="p">()</span>
<span class="n">dog</span><span class="p">.</span><span class="nf">speak</span><span class="p">()</span>
<span class="n">cat</span><span class="p">.</span><span class="nf">speak</span><span class="p">()</span>
<span class="n">bird</span><span class="p">.</span><span class="nf">speak</span><span class="p">()</span>

<span class="n">animals</span> <span class="o">=</span> <span class="p">[</span><span class="nc">Animal</span><span class="p">(</span><span class="sh">"</span><span class="s">Zoo 动物</span><span class="sh">"</span><span class="p">),</span> <span class="nc">Dog</span><span class="p">(</span><span class="sh">"</span><span class="s">Max</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">German Shepherd</span><span class="sh">"</span><span class="p">),</span> <span class="nc">Cat</span><span class="p">(</span><span class="sh">"</span><span class="s">Mittens</span><span class="sh">"</span><span class="p">),</span> <span class="nc">Bird</span><span class="p">(</span><span class="sh">"</span><span class="s">Parrot</span><span class="sh">"</span><span class="p">)]</span>
<span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">animals</span><span class="p">:</span>
    <span class="n">a</span><span class="p">.</span><span class="nf">speak</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250708140340244.png" alt="image-20250708140340244" style="zoom:50%;" /></p>

<h1 id="4object类">4、object类</h1>

<p>object 类是Python中所有类的最终基类。这意味着所有在Python中定义的类（无论是显式继承还是隐式继承）都直接或间接地继承自 object。它提供了所有Python对象共有的基本行为和特殊方法。</p>

<p>在Python 3中，所有的类都是“新式类”（new-style classes），它们都隐式地继承自 object。即使你定义一个简单的类 class MyClass: pass，它也等同于 <code class="language-plaintext highlighter-rouge">class MyClass(object): pass</code>。</p>

<p>object 类定义了许多特殊的“<strong>魔术方法</strong>”（或称“双下划线方法”、“dunder methods”），这些方法为Python的内置操作提供了默认实现。当你定义一个类并重写这些方法时，你实际上是在定制这些内置操作的行为。</p>

<p><strong>object 类提供的一些重要特殊方法：</strong></p>

<p>●<code class="language-plaintext highlighter-rouge"> __init__(self, ...)</code>：对象的构造器（构造函数）。</p>

<p>● <code class="language-plaintext highlighter-rouge">__new__(cls, ...)</code>：对象的创建器（在<code class="language-plaintext highlighter-rouge"> __init__ </code>之前调用）。</p>

<p>● <code class="language-plaintext highlighter-rouge">__str__(self)</code>：返回对象的“非正式”字符串表示，供 str() 函数和 print() 函数使用。通常用于用户友好的输出。</p>

<p>●<code class="language-plaintext highlighter-rouge"> __repr__(self)</code>：返回对象的“正式”字符串表示，供 repr() 函数和调试器使用。通常应返回一个字符串，该字符串在可能的情况下，可以用来重新创建对象。</p>

<p>●<code class="language-plaintext highlighter-rouge"> __eq__(self, other)</code>：定义相等性比较（<code class="language-plaintext highlighter-rouge">== </code>运算符）。</p>

<p>● <code class="language-plaintext highlighter-rouge">__ne__(self, other)</code>：定义不相等性比较（<code class="language-plaintext highlighter-rouge">!= </code>运算符）。</p>

<p>● <code class="language-plaintext highlighter-rouge">__lt__(self, other)</code>：定义小于比较（<code class="language-plaintext highlighter-rouge">&lt;</code> 运算符）。</p>

<p>● <code class="language-plaintext highlighter-rouge">__le__(self, other)</code>：定义小于等于比较（<code class="language-plaintext highlighter-rouge">&lt;=</code> 运算符）。</p>

<p>● <code class="language-plaintext highlighter-rouge">__gt__(self, other)</code>：定义大于比较（<code class="language-plaintext highlighter-rouge">&gt;</code> 运算符）。</p>

<p>● <code class="language-plaintext highlighter-rouge">__ge__(self, other)</code>：定义大于等于比较（<code class="language-plaintext highlighter-rouge">&gt;=</code> 运算符）。</p>

<p>●<code class="language-plaintext highlighter-rouge"> __hash__(self)</code>：定义对象的哈希值，用于在哈希表（如字典的键、集合的元素）中存储对象。如果一个类重写了<code class="language-plaintext highlighter-rouge"> __eq__</code>，通常也应该重写<code class="language-plaintext highlighter-rouge"> __hash__</code>。可变对象默认不可哈希。</p>

<p>●<code class="language-plaintext highlighter-rouge"> __delattr__(self, name)</code>：定义删除属性时的行为（<code class="language-plaintext highlighter-rouge">del obj.attr</code>）。</p>

<p>● <code class="language-plaintext highlighter-rouge">__getattr__(self, name)</code>：定义当访问不存在的属性时，如何处理。</p>

<p>● <code class="language-plaintext highlighter-rouge">__setattr__(self, name, value)</code>：定义设置属性时的行为（<code class="language-plaintext highlighter-rouge">obj.attr = value</code>）。</p>

<p>● <code class="language-plaintext highlighter-rouge">__dir__(self)</code>：定义 dir() 函数的行为。</p>

<p>●<code class="language-plaintext highlighter-rouge"> __doc__</code>：类的文档字符串。</p>

<p>● <code class="language-plaintext highlighter-rouge">__class__</code>：指向对象所属的类。</p>

<p>● <code class="language-plaintext highlighter-rouge">__dict__</code>：存储实例属性的字典。</p>

<blockquote>
  <p>● <strong>统一对象模型：</strong> object 类作为所有类的根，确保了Python中所有对象都具有一套共同的基本行为。这使得Python能够实现统一的内存管理、垃圾回收、属性查找机制等。无论你处理的是整数、字符串、列表还是自定义类的实例，它们本质上都是 object 的子类，因此可以以统一的方式进行操作。</p>

  <p>● <strong>MRO 的终点：</strong> 任何类的MRO链最终都会以 object 结束。当Python查找一个方法或属性时，如果一直向上追溯到 object 仍然没有找到，才会抛出 AttributeError。</p>

  <p>● <strong>默认行为的提供：</strong> object 类提供了许多特殊方法的默认实现。例如，<code class="language-plaintext highlighter-rouge">__str__</code> 的默认实现通常会返回一个包含类名和内存地址的字符串。当你重写这些方法时，你是在定制这些默认行为。</p>

  <p>● <strong>新式类与旧式类 (Python 2 历史背景)：</strong> 在Python 2 中，存在“旧式类”（不继承自 object）和“新式类”（继承自 object）。旧式类在多重继承和方法解析方面存在一些问题。Python 3 统一了所有类都是新式类，从而简化了继承模型，并强制使用C3 MRO算法。这个统一是Python设计哲学中“一切皆对象”原则的体现。</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
</pre></td><td class="rouge-code"><pre><span class="c1"># 博客地址: https://kirsten-1.github.io/
# 创建者: kirsten-1
# 时间: 2025/7/8  14:29
</span>

<span class="c1"># 显式继承object
</span><span class="k">class</span> <span class="nc">MyCustomObject</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">
    一个自定义对象，演示继承自object的默认行为和重写
    </span><span class="sh">"""</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>

    <span class="c1"># 重写__str__方法，提供用户友好的字符串表示
</span>    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="sh">"</span><span class="s">MyCustomObject value是:</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">value</span><span class="si">}</span><span class="sh">"</span>

    <span class="c1"># 重写__repr__方法，提供一个官方的、可用于重建的字符串表示
</span>    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="c1"># !r表示调用repr()转换value
</span>        <span class="k">return</span> <span class="sa">f</span><span class="sh">"</span><span class="s">MyCustomObject value是:</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">value</span><span class="si">!r}</span><span class="sh">"</span>

    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nf">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">MyCustomObject</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">value</span> <span class="o">==</span> <span class="n">other</span><span class="p">.</span><span class="n">value</span>
        <span class="k">return</span> <span class="nb">NotImplemented</span>  <span class="c1"># 表示不处理与其他类型的比较
</span>
    <span class="c1"># 如果重写了__eq__且对象可哈希，则应该重写__hash__
</span>    <span class="k">def</span> <span class="nf">__hash__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nf">hash</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">value</span><span class="p">)</span> <span class="c1"># 使用value的哈希值作为对象的哈希值
</span>
    <span class="k">def</span> <span class="nf">show_internal_info</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">实例属性字典:</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">__dict__</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">所属的类:</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">__class__</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">类的基类:</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">__class__</span><span class="p">.</span><span class="n">__bases__</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">类的MRO:</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">__class__</span><span class="p">.</span><span class="n">__mro__</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>



<span class="n">o1</span> <span class="o">=</span> <span class="nc">MyCustomObject</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">print(o1):</span><span class="si">{</span><span class="n">o1</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>  <span class="c1"># 调用__str__
</span><span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">repr(o1):</span><span class="si">{</span><span class="nf">repr</span><span class="p">(</span><span class="n">o1</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>  <span class="c1"># 调用__repr__
# 默认情况下，如果只定义了__repr__，没有定义__str__， 那么print会调用__repr__
</span>

<span class="c1"># 调用__eq__
</span><span class="n">o2</span> <span class="o">=</span> <span class="nc">MyCustomObject</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="n">o3</span> <span class="o">=</span> <span class="nc">MyCustomObject</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">o1</span> <span class="o">==</span> <span class="n">o2</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">o1</span> <span class="o">==</span> <span class="n">o3</span><span class="p">)</span>

<span class="c1"># 字典中，__hash__
</span><span class="n">set1</span> <span class="o">=</span> <span class="p">{</span><span class="n">o1</span><span class="p">,</span> <span class="n">o2</span><span class="p">,</span> <span class="n">o3</span><span class="p">}</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">len</span><span class="p">(</span><span class="n">set1</span><span class="p">))</span>
<span class="n">dict1</span> <span class="o">=</span> <span class="p">{</span><span class="n">o1</span><span class="p">:</span> <span class="sh">"</span><span class="s">v1</span><span class="sh">"</span><span class="p">,</span> <span class="n">o2</span><span class="p">:</span> <span class="sh">"</span><span class="s">v2</span><span class="sh">"</span><span class="p">}</span>
<span class="nf">print</span><span class="p">(</span><span class="n">dict1</span><span class="p">[</span><span class="n">o3</span><span class="p">])</span>

<span class="n">o1</span><span class="p">.</span><span class="nf">show_internal_info</span><span class="p">()</span>

<span class="nf">print</span><span class="p">(</span><span class="nf">issubclass</span><span class="p">(</span><span class="n">MyCustomObject</span><span class="p">,</span> <span class="nb">object</span><span class="p">))</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250708144932807.png" alt="image-20250708144932807" style="zoom:50%;" /></p>

<h1 id="5多态">5、多态</h1>

<p>多态是面向对象编程的第三个核心特性。它允许不同类的对象对同一消息（方法调用）作出不同的响应。在Python中，多态主要通过“鸭子类型”（Duck Typing）和抽象基类（Abstract Base Classes, ABCs）来实现。多态的核心在于“<strong>一个接口，多种实现</strong>”。它使得代码更加灵活、可扩展和易于维护。</p>

<h2 id="1鸭子类型">（1）鸭子类型</h2>

<p>○ <strong>Python中多态的主要实现方式。</strong></p>

<p>○ <strong>思想：</strong> “如果它走起来像鸭子，叫起来像鸭子，那么它就是一只鸭子。”这意味着，只要一个对象拥有所需的方法（或属性），就可以被当作特定类型来处理，而无需显式声明它继承自某个共同的基类或实现了某个接口。</p>

<p>○ <strong>优点：</strong> 极大地提高了代码的灵活性和解耦性。你不需要关心对象的具体类型，只需要关心它是否提供了你所需的方法。</p>

<p>○ <strong>缺点：</strong> 缺乏编译时类型检查，错误可能在运行时才暴露。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre></td><td class="rouge-code"><pre><span class="c1"># 博客地址: https://kirsten-1.github.io/
# 创建者: kirsten-1
# 时间: 2025/7/8  15:26
</span>

<span class="k">class</span> <span class="nc">Duck</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">quack</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Quack!!!</span><span class="sh">"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fly</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">鸭子在飞...</span><span class="sh">"</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Plane</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">quack</span><span class="p">(</span><span class="n">self</span><span class="p">):</span> <span class="c1"># 尽管是飞机，但也有quack方法
</span>        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">飞机也可以quack（像鸭子？）...</span><span class="sh">"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fly</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">飞机在飞...</span><span class="sh">"</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">quack</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">人模仿鸭子quack...</span><span class="sh">"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fly</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">人尝试飞，但是掉下来了...</span><span class="sh">"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">make_it_quack_and_fly</span><span class="p">(</span><span class="n">entity</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">
    一个可以接受任何拥有quack和fly的对象的函数
    </span><span class="sh">"""</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">一个可以接受任何拥有quack和fly的对象的函数make_it_quack_and_fly被调用</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">entity</span><span class="p">.</span><span class="nf">quack</span><span class="p">()</span>
    <span class="n">entity</span><span class="p">.</span><span class="nf">fly</span><span class="p">()</span>

<span class="n">duck</span> <span class="o">=</span> <span class="nc">Duck</span><span class="p">()</span>
<span class="n">plane</span> <span class="o">=</span> <span class="nc">Plane</span><span class="p">()</span>
<span class="n">person</span> <span class="o">=</span> <span class="nc">Person</span><span class="p">()</span>

<span class="nf">make_it_quack_and_fly</span><span class="p">(</span><span class="n">duck</span><span class="p">)</span>
<span class="nf">make_it_quack_and_fly</span><span class="p">(</span><span class="n">plane</span><span class="p">)</span>
<span class="nf">make_it_quack_and_fly</span><span class="p">(</span><span class="n">person</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250708153257998.png" alt="image-20250708153257998" style="zoom:50%;" /></p>

<h2 id="2抽象基类-abstract-base-classes-abcs">（2）抽象基类 (Abstract Base Classes, ABCs)</h2>

<p>○ Python提供了 abc 模块来支持抽象基类。ABCs允许你定义一个接口（即一组必须由子类实现的方法），但不能直接实例化。</p>

<p>○ <strong>用途：</strong></p>

<p>■ <strong>强制实现：</strong> 确保子类实现了特定的方法，否则无法实例化。</p>

<p>■ <strong>形式化接口：</strong> 为鸭子类型提供一个更明确的契约，提高代码可读性和可维护性。</p>

<p>■ <strong>类型检查：</strong> 可以使用 <code class="language-plaintext highlighter-rouge">isinstance() </code>和 <code class="language-plaintext highlighter-rouge">issubclass() </code>对实现了ABC的类进行类型检查。</p>

<p>○ <strong>定义：</strong></p>

<p>■ 继承 <code class="language-plaintext highlighter-rouge">abc.ABC</code>。</p>

<p>■ 使用 <code class="language-plaintext highlighter-rouge">@abc.abstractmethod</code> 装饰器标记抽象方法。</p>

<blockquote>
  <p>● <strong>动态分派 (Dynamic Dispatch)：</strong> 这是多态的底层机制。当调用一个对象的方法时，Python解释器在运行时根据对象的实际类型来查找并执行对应的方法。它不是在编译时就确定调用哪个方法，而是等到运行时才进行“分派”。</p>

  <p>○ 例如，<code class="language-plaintext highlighter-rouge">animal.speak()</code>：如果 animal 是 Dog 实例，就调用 Dog 类的 speak 方法；如果是 Cat 实例，就调用 Cat 类的 speak 方法。这种运行时查找和执行的机制就是动态分派。</p>

  <p>● <strong>Python的类型系统：</strong> Python是一种动态类型语言，变量没有固定的类型，而是引用对象的类型。这种灵活性是鸭子类型的基础。解释器在执行方法调用时，只关心对象是否具有该方法，而不关心对象的声明类型。</p>

  <p>● <strong>ABCs 的原理：</strong></p>

  <p>○ 当一个类继承自<code class="language-plaintext highlighter-rouge"> abc.ABC </code>并包含 <code class="language-plaintext highlighter-rouge">@abstractmethod </code>装饰的方法时，该类就不能被直接实例化。</p>

  <p>○ 当一个子类继承这个ABC时，如果它没有实现所有抽象方法，Python会在尝试实例化该子类时抛出 TypeError。</p>

  <p>○ ABCs通过在类创建时修改类的元类（metaclass，通常是 <code class="language-plaintext highlighter-rouge">abc.ABCMeta</code>）来实现这种行为。元类控制着类的创建过程，从而能够强制执行抽象方法的实现。</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
</pre></td><td class="rouge-code"><pre><span class="c1"># 博客地址: https://kirsten-1.github.io/
# 创建者: kirsten-1
# 时间: 2025/7/8  15:33
</span>
<span class="kn">import</span> <span class="n">abc</span>
<span class="k">class</span> <span class="nc">Shape</span><span class="p">(</span><span class="n">abc</span><span class="p">.</span><span class="n">ABC</span><span class="p">):</span> <span class="c1"># 继承自abc.ABC，使其成为抽象类
</span>    <span class="sh">"""</span><span class="s">
    抽象基类：图形
    定义了所有图形应该有的通用的接口
    </span><span class="sh">"""</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

    <span class="nd">@abc.abstractmethod</span> <span class="c1"># 抽象方法，子类必须实现
</span>    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">
        计算图形面积的抽象方法
        </span><span class="sh">"""</span>
        <span class="k">pass</span>  <span class="c1"># 抽象方法没有实现体
</span>
    <span class="nd">@abc.abstractmethod</span>
    <span class="k">def</span> <span class="nf">perimeter</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">
        计算图形周长的抽象方法
        </span><span class="sh">"""</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">describe</span><span class="p">(</span><span class="n">self</span><span class="p">):</span> <span class="c1"># 普通方法，子类可以继承，也可以重写
</span>        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">这是一个</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">图形...</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># generic_shape = Shape("Generic")  # TypeError: Can't instantiate abstract class Shape with abstract methods area, perimeter
</span>
<span class="k">class</span> <span class="nc">Rectangle</span><span class="p">(</span><span class="n">Shape</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">
    具体子类：矩形，实现Shape的抽象方法
    </span><span class="sh">"""</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="nf">super</span><span class="p">().</span><span class="nf">__init__</span><span class="p">(</span><span class="sh">"</span><span class="s">Rectangle</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">width</span>
        <span class="n">self</span><span class="p">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">height</span>

    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">width</span> <span class="o">*</span> <span class="n">self</span><span class="p">.</span><span class="n">height</span>

    <span class="k">def</span> <span class="nf">perimeter</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">height</span> <span class="o">+</span> <span class="n">self</span><span class="p">.</span><span class="n">width</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Circle</span><span class="p">(</span><span class="n">Shape</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">
    具体子类：圆形，实现Shape的抽象方法
    </span><span class="sh">"""</span>
    <span class="n">PI</span> <span class="o">=</span> <span class="mf">3.14159</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">radius</span><span class="p">):</span>
        <span class="nf">super</span><span class="p">().</span><span class="nf">__init__</span><span class="p">(</span><span class="sh">"</span><span class="s">Circle</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">radius</span>

    <span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Circle</span><span class="p">.</span><span class="n">PI</span> <span class="o">*</span> <span class="n">self</span><span class="p">.</span><span class="n">radius</span> <span class="o">*</span> <span class="n">self</span><span class="p">.</span><span class="n">radius</span>

    <span class="k">def</span> <span class="nf">perimeter</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">Circle</span><span class="p">.</span><span class="n">PI</span> <span class="o">*</span> <span class="n">self</span><span class="p">.</span><span class="n">radius</span>

<span class="c1"># 测试
</span><span class="n">r1</span> <span class="o">=</span> <span class="nc">Rectangle</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">c1</span> <span class="o">=</span> <span class="nc">Circle</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># 使用多态的方式处理不同的形状
</span><span class="n">shapes</span> <span class="o">=</span> <span class="p">[</span><span class="n">r1</span><span class="p">,</span> <span class="n">c1</span><span class="p">]</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">shapes</span><span class="p">:</span>
    <span class="n">item</span><span class="p">.</span><span class="nf">describe</span><span class="p">()</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">面积:</span><span class="si">{</span><span class="n">item</span><span class="p">.</span><span class="nf">area</span><span class="p">()</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">周长:</span><span class="si">{</span><span class="n">item</span><span class="p">.</span><span class="nf">perimeter</span><span class="p">()</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">是Shape的实例吗？</span><span class="si">{</span><span class="nf">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Shape</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">IncompleteShape</span><span class="p">(</span><span class="n">Shape</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">
    未实现抽象方法的子类
    </span><span class="sh">"""</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="nf">super</span><span class="p">().</span><span class="nf">__init__</span><span class="p">(</span><span class="sh">"</span><span class="s">Incomplete</span><span class="sh">"</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">o1</span> <span class="o">=</span> <span class="nc">IncompleteShape</span><span class="p">()</span>
<span class="k">except</span> <span class="nb">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">报错：</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250708154539683.png" alt="image-20250708154539683" style="zoom:50%;" /></p>

<h1 id="6特殊方法和特殊属性">6、特殊方法和特殊属性</h1>

<p>特殊方法（Special Methods），也常被称为“魔术方法”（Magic Methods）或“双下划线方法”（Dunder Methods），是Python中以双下划线开头和结尾的方法（例如<code class="language-plaintext highlighter-rouge"> __init__, __str__</code>）。它们允许你定义类的行为，以便与Python的内置函数、运算符和语言特性（如上下文管理器、迭代器）进行交互。特殊属性是类或实例内置的、以双下划线开头和结尾的属性。</p>

<p>特殊方法是Python实现其“数据模型”（Data Model）的核心。通过重写这些特殊方法，你可以让自定义类的对象行为得像内置类型一样，例如支持加法、索引、迭代、上下文管理等。这被称为<strong>运算符重载 (Operator Overloading)</strong>。</p>

<p><strong>常见且重要的特殊方法：</strong></p>

<ul>
  <li><strong>构造与初始化：</strong></li>
</ul>

<p>○ <code class="language-plaintext highlighter-rouge">__new__(cls, ...)</code>：对象的创建方法，在<code class="language-plaintext highlighter-rouge"> __init__ </code>之前调用，负责创建并返回一个实例对象。</p>

<p>○<code class="language-plaintext highlighter-rouge"> __init__(self, ...)</code>：对象的初始化方法，用于设置新创建实例的属性。</p>

<p>○ <code class="language-plaintext highlighter-rouge">__del__(self)</code>：析构方法，当对象被垃圾回收时调用（不保证何时调用）。</p>

<ul>
  <li><strong>字符串表示：</strong></li>
</ul>

<p>○<code class="language-plaintext highlighter-rouge"> __str__(self)</code>：返回对象的“非正式”字符串表示，供 print() 和 str() 使用。</p>

<p>○ <code class="language-plaintext highlighter-rouge">__repr__(self)</code>：返回对象的“正式”字符串表示，供 repr() 和调试器使用，通常应能用于重建对象。</p>

<ul>
  <li><strong>比较操作：</strong></li>
</ul>

<p>○ <code class="language-plaintext highlighter-rouge">__eq__(self, other)</code>：<code class="language-plaintext highlighter-rouge">== </code>运算符。</p>

<p>○ <code class="language-plaintext highlighter-rouge">__ne__(self, other)</code>：<code class="language-plaintext highlighter-rouge">!=</code> 运算符。</p>

<p>○<code class="language-plaintext highlighter-rouge"> __lt__, __le__, __gt__, __ge</code>__：<code class="language-plaintext highlighter-rouge">&lt;</code>,<code class="language-plaintext highlighter-rouge"> &lt;=</code>,<code class="language-plaintext highlighter-rouge"> &gt;</code>, <code class="language-plaintext highlighter-rouge">&gt;=</code> 运算符。</p>

<ul>
  <li><strong>数值运算：</strong></li>
</ul>

<p>○<code class="language-plaintext highlighter-rouge"> __add__(self, other)</code>：<code class="language-plaintext highlighter-rouge">+</code> 运算符。</p>

<p>○ <code class="language-plaintext highlighter-rouge">__sub__(self, other)</code>：<code class="language-plaintext highlighter-rouge">-</code> 运算符。</p>

<p>○ <code class="language-plaintext highlighter-rouge">__mul__(self, other)</code>：<code class="language-plaintext highlighter-rouge">*</code> 运算符。</p>

<p>○ <code class="language-plaintext highlighter-rouge">__truediv__(self, other)</code>：<code class="language-plaintext highlighter-rouge">/</code> 运算符。</p>

<p>○ <code class="language-plaintext highlighter-rouge">__floordiv__(self, other)</code>：<code class="language-plaintext highlighter-rouge">//</code> 运算符。</p>

<p>○ <code class="language-plaintext highlighter-rouge">__mod__(self, other)</code>：<code class="language-plaintext highlighter-rouge">% </code>运算符。</p>

<p>○ <code class="language-plaintext highlighter-rouge">__pow__(self, other)</code>：<code class="language-plaintext highlighter-rouge">** </code>运算符。</p>

<p>○ 还有反射版本（如<code class="language-plaintext highlighter-rouge"> __radd__</code>）、原地操作（如<code class="language-plaintext highlighter-rouge"> __iadd__</code>）等。</p>

<ul>
  <li><strong>容器类型操作：</strong></li>
</ul>

<p>○ <code class="language-plaintext highlighter-rouge">__len__(self)</code>：<code class="language-plaintext highlighter-rouge">len() </code>函数。</p>

<p>○ <code class="language-plaintext highlighter-rouge">__getitem__(self, key)</code>：索引访问<code class="language-plaintext highlighter-rouge">（obj[key]）</code>和切片访问。</p>

<p>○ <code class="language-plaintext highlighter-rouge">__setitem__(self, key, value</code>)：索引赋值（<code class="language-plaintext highlighter-rouge">obj[key] = value</code>）。</p>

<p>○ <code class="language-plaintext highlighter-rouge">__delitem__(self, key)</code>：删除元素（<code class="language-plaintext highlighter-rouge">del obj[key]</code>）。</p>

<p>○ <code class="language-plaintext highlighter-rouge">__contains__(self, item)</code>：<code class="language-plaintext highlighter-rouge">in </code>运算符。</p>

<ul>
  <li><strong>可调用对象：</strong></li>
</ul>

<p>○ <code class="language-plaintext highlighter-rouge">__call__(self, *args, **kwargs)</code>：使实例对象可以像函数一样被调用（<code class="language-plaintext highlighter-rouge">obj(...)</code>）。</p>

<ul>
  <li><strong>迭代器：</strong></li>
</ul>

<p>○ <code class="language-plaintext highlighter-rouge">__iter__(self)</code>：返回一个迭代器对象，用于<code class="language-plaintext highlighter-rouge"> for ... in ... </code>循环。</p>

<p>○ <code class="language-plaintext highlighter-rouge">__next__(self)</code>：迭代器协议的一部分，返回下一个元素。</p>

<ul>
  <li><strong>上下文管理器：</strong></li>
</ul>

<p>○ <code class="language-plaintext highlighter-rouge">__enter__(self)</code>：进入 with 语句块时调用。</p>

<p>○ <code class="language-plaintext highlighter-rouge">__exit__(self, exc_type, exc_val, exc_tb)</code>：退出 with 语句块时调用，无论是否发生异常。</p>

<p><strong>特殊属性：</strong></p>

<p>● <code class="language-plaintext highlighter-rouge">__dict__</code>：存储实例或类的命名空间的字典。</p>

<p>● <code class="language-plaintext highlighter-rouge">__class__</code>：指向对象所属的类。</p>

<p>●<code class="language-plaintext highlighter-rouge"> __name__</code>：模块或类的名称。</p>

<p>● <code class="language-plaintext highlighter-rouge">__module__</code>：对象所属的模块名称。</p>

<p>● <code class="language-plaintext highlighter-rouge">__doc__</code>：对象的文档字符串。</p>

<p>● <code class="language-plaintext highlighter-rouge">__bases__</code>：类的直接基类元组。</p>

<p>● <code class="language-plaintext highlighter-rouge">__mro__</code>：类的MRO元组。</p>

<blockquote>
  <p>● <strong>Python数据模型：</strong> Python的解释器在执行内置操作（如 <code class="language-plaintext highlighter-rouge">+</code> 运算符、<code class="language-plaintext highlighter-rouge">len()</code> 函数、<code class="language-plaintext highlighter-rouge">for</code> 循环等）时，会查找对象类型中对应的特殊方法。例如，当执行 <code class="language-plaintext highlighter-rouge">a + b </code>时，Python会尝试调用<code class="language-plaintext highlighter-rouge"> a.__add__(b)</code>。如果 a 没有定义<code class="language-plaintext highlighter-rouge"> __add__</code>，它会尝试调用 <code class="language-plaintext highlighter-rouge">b.__radd__(a)（反射加法）</code>。</p>

  <p>● <strong>协议 (Protocols)：</strong> 特殊方法实现了Python的各种“协议”。例如，<code class="language-plaintext highlighter-rouge">__iter__</code> 和<code class="language-plaintext highlighter-rouge"> __next__ </code>实现了迭代器协议，<code class="language-plaintext highlighter-rouge">__enter__ </code>和<code class="language-plaintext highlighter-rouge"> __exit__ </code>实现了上下文管理器协议。当一个对象实现了某个协议所需的所有特殊方法时，它就可以被当作符合该协议的类型来使用。</p>

  <p>● <strong>动态绑定：</strong> 与普通方法一样，特殊方法的调用也是动态绑定的。解释器在运行时根据对象的实际类型来查找并调用正确的特殊方法。</p>

  <p>● <strong>属性查找：</strong> 特殊属性通常是解释器在创建类或实例时自动设置的元数据，或者通过特定的机制（如<code class="language-plaintext highlighter-rouge"> __dict__</code>）提供对内部状态的访问。</p>
</blockquote>

<hr />

<h2 id="1字符串表示">（1）字符串表示</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre></td><td class="rouge-code"><pre><span class="c1"># 博客地址: https://kirsten-1.github.io/
# 创建者: kirsten-1
# 时间: 2025/7/8  17:28
</span>

<span class="k">class</span> <span class="nc">Point</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="n">self</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">
        用户友好的字符串表示
        </span><span class="sh">"""</span>
        <span class="k">return</span> <span class="sa">f</span><span class="sh">"</span><span class="s">(x=</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">x</span><span class="si">}</span><span class="s">, y=</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">y</span><span class="si">}</span><span class="s">)</span><span class="sh">"</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">
        官方的、可以用于重建的字符串表示（重新创建对象）
        </span><span class="sh">"""</span>
        <span class="k">return</span> <span class="sa">f</span><span class="sh">"</span><span class="s">Point(x=</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">x</span><span class="si">}</span><span class="s">, y=</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">y</span><span class="si">}</span><span class="s">)</span><span class="sh">"</span>

<span class="n">p</span> <span class="o">=</span> <span class="nc">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

<span class="n">p_repr</span> <span class="o">=</span> <span class="nf">repr</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="n">p_</span> <span class="o">=</span> <span class="nf">eval</span><span class="p">(</span><span class="n">p_repr</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">p_</span><span class="p">)</span>


</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250708174933023.png" alt="image-20250708174933023" style="zoom:50%;" /></p>

<h2 id="2比较操作">（2）比较操作</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="rouge-code"><pre><span class="c1"># 博客地址: https://kirsten-1.github.io/
# 创建者: kirsten-1
# 时间: 2025/7/8  19:35
</span>
<span class="k">class</span> <span class="nc">MyNumber</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nf">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">MyNumber</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">value</span> <span class="o">==</span> <span class="n">other</span><span class="p">.</span><span class="n">value</span>
        <span class="k">return</span> <span class="nb">NotImplemented</span>  <span class="c1"># 允许与其他类型比较的时候，如果无法处理就返回NotImplemented
</span>
    <span class="k">def</span> <span class="nf">__lt__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nf">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">MyNumber</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">value</span> <span class="o">&lt;</span> <span class="n">other</span><span class="p">.</span><span class="n">value</span>
        <span class="k">return</span> <span class="nb">NotImplemented</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">MyNumber(</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">value</span><span class="si">}</span><span class="s">)</span><span class="sh">"</span><span class="p">)</span>

<span class="n">n1</span> <span class="o">=</span> <span class="nc">MyNumber</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">n2</span> <span class="o">=</span> <span class="nc">MyNumber</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="n">n3</span> <span class="o">=</span> <span class="nc">MyNumber</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">n1 == n3:</span><span class="si">{</span><span class="n">n1</span> <span class="o">==</span> <span class="n">n3</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">n1 &lt; n2?</span><span class="si">{</span><span class="n">n1</span> <span class="o">&lt;</span> <span class="n">n2</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">n1 == 10?</span><span class="si">{</span><span class="n">n1</span> <span class="o">==</span> <span class="mi">10</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250708194240144.png" alt="image-20250708194240144" style="zoom:50%;" /></p>

<h2 id="3数值运算">（3）数值运算</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre></td><td class="rouge-code"><pre><span class="c1"># 博客地址: https://kirsten-1.github.io/
# 创建者: kirsten-1
# 时间: 2025/7/8  19:45
</span>

<span class="k">class</span> <span class="nc">Vector</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="n">self</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>

    <span class="k">def</span> <span class="nf">__add__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nf">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Vector</span><span class="p">):</span>
            <span class="k">return</span> <span class="nc">Vector</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">other</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">other</span><span class="p">.</span><span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">NotImplemented</span>

    <span class="k">def</span> <span class="nf">__mul__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">scalar</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">
        标量和向量的乘法
        </span><span class="sh">"""</span>
        <span class="k">if</span> <span class="nf">isinstance</span><span class="p">(</span><span class="n">scalar</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="k">return</span>  <span class="nc">Vector</span><span class="p">(</span><span class="n">scalar</span> <span class="o">*</span> <span class="n">self</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">scalar</span> <span class="o">*</span> <span class="n">self</span><span class="p">.</span><span class="n">y</span><span class="p">)</span>
        <span class="k">return</span>  <span class="nb">NotImplemented</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="sh">"</span><span class="s">Vector(x=</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">x</span><span class="si">}</span><span class="s">, y=</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">y</span><span class="si">}</span><span class="s">)</span><span class="sh">"</span>

<span class="n">v1</span> <span class="o">=</span> <span class="nc">Vector</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">v2</span> <span class="o">=</span> <span class="nc">Vector</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

<span class="n">v_sum</span> <span class="o">=</span> <span class="n">v1</span> <span class="o">+</span> <span class="n">v2</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">v1</span><span class="si">}</span><span class="s"> + </span><span class="si">{</span><span class="n">v2</span><span class="si">}</span><span class="s">= </span><span class="si">{</span><span class="n">v_sum</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

<span class="n">v_times_5</span> <span class="o">=</span> <span class="n">v1</span> <span class="o">*</span> <span class="mi">5</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">v1</span><span class="si">}</span><span class="s">*5=</span><span class="si">{</span><span class="n">v_times_5</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250708195009006.png" alt="image-20250708195009006" style="zoom:50%;" /></p>

<h2 id="4容器类型操作">（4）容器类型操作</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
</pre></td><td class="rouge-code"><pre><span class="c1"># 博客地址: https://kirsten-1.github.io/
# 创建者: kirsten-1
# 时间: 2025/7/8  19:50
</span>

<span class="k">class</span> <span class="nc">MyList</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">_data</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nf">len</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">_data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">_data</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">__setitem__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">_data</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">__delitem__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="k">del</span> <span class="n">self</span><span class="p">.</span><span class="n">_data</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">__contains__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">_data</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="sh">"</span><span class="s">MyList(</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">_data</span><span class="si">}</span><span class="s">)</span><span class="sh">"</span>

<span class="n">ml</span> <span class="o">=</span> <span class="nc">MyList</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">ml</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">长度:</span><span class="si">{</span><span class="nf">len</span><span class="p">(</span><span class="n">ml</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">ml</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="nf">print</span><span class="p">(</span><span class="n">ml</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">4</span><span class="p">])</span>
<span class="n">ml</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>
<span class="nf">print</span><span class="p">(</span><span class="n">ml</span><span class="p">)</span>

<span class="k">del</span> <span class="n">ml</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="nf">print</span><span class="p">(</span><span class="n">ml</span><span class="p">)</span>

<span class="nf">print</span><span class="p">(</span><span class="mi">99</span> <span class="ow">in</span> <span class="n">ml</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250708195516716.png" alt="image-20250708195516716" style="zoom:50%;" /></p>

<h2 id="5可调用对象">（5）可调用对象</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="rouge-code"><pre><span class="c1"># 博客地址: https://kirsten-1.github.io/
# 创建者: kirsten-1
# 时间: 2025/7/8  23:45
</span>

<span class="k">class</span> <span class="nc">Multiplier</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">factor</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">factor</span> <span class="o">=</span> <span class="n">factor</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">
        使得实例可像函数一样被调用
        </span><span class="sh">"""</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">factor</span> <span class="o">*</span> <span class="n">value</span>

<span class="n">double</span> <span class="o">=</span> <span class="nc">Multiplier</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">triple</span> <span class="o">=</span> <span class="nc">Multiplier</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">double</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="nf">print</span><span class="p">(</span><span class="n">double</span><span class="p">.</span><span class="nf">__call__</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>  <span class="c1"># 与double(5)等价
</span><span class="nf">print</span><span class="p">(</span><span class="nf">triple</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="nf">print</span><span class="p">(</span><span class="n">triple</span><span class="p">.</span><span class="nf">__call__</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>  <span class="c1"># 与triple(10)等价
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250708234835288.png" alt="image-20250708234835288" style="zoom:50%;" /></p>

<h2 id="6上下文管理器">（6）上下文管理器</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre></td><td class="rouge-code"><pre><span class="c1"># 博客地址: https://kirsten-1.github.io/
# 创建者: kirsten-1
# 时间: 2025/7/8  23:49
</span>
<span class="k">class</span> <span class="nc">MyFileManager</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span>
        <span class="n">self</span><span class="p">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span>
        <span class="n">self</span><span class="p">.</span><span class="nb">file</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">__enter__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">
        进入with语句块时会调用
        </span><span class="sh">"""</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">打开文件:</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">filename</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="nb">file</span> <span class="o">=</span> <span class="nf">open</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">filename</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">mode</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="nb">file</span>

    <span class="k">def</span> <span class="nf">__exit__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_val</span><span class="p">,</span> <span class="n">exc_tb</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">
        退出with语句块时调用，无论是否发生异常
        </span><span class="sh">"""</span>
        <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="nb">file</span><span class="p">:</span>
            <span class="n">self</span><span class="p">.</span><span class="nb">file</span><span class="p">.</span><span class="nf">close</span><span class="p">()</span>
            <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">关闭文件：</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">filename</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">exc_type</span><span class="p">:</span>
            <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">发生异常:</span><span class="si">{</span><span class="n">exc_type</span><span class="p">.</span><span class="n">__name__</span><span class="si">}</span><span class="s">:</span><span class="si">{</span><span class="n">exc_val</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>  <span class="c1"># 返回False表示不处理异常，让其继续传播
</span>
<span class="k">with</span> <span class="nc">MyFileManager</span><span class="p">(</span><span class="sh">"</span><span class="s">test_file.txt</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">w</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">Hello from context manager...</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">f</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">this is line 2...</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">文件写入完成</span><span class="sh">"</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="k">with</span> <span class="nc">MyFileManager</span><span class="p">(</span><span class="sh">"</span><span class="s">test_file_error.txt</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">w</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">This will cause an error...</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">f</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">this is line 2...</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">raise</span> <span class="nc">ValueError</span><span class="p">(</span><span class="sh">"</span><span class="s">出问题了...</span><span class="sh">"</span><span class="p">)</span>
<span class="k">except</span> <span class="nb">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">报错:</span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250708235712150.png" alt="image-20250708235712150" style="zoom:50%;" /></p>

<h2 id="7特殊属性">（7）特殊属性</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre><span class="c1"># 博客地址: https://kirsten-1.github.io/
# 创建者: kirsten-1
# 时间: 2025/7/8  23:57
</span>
<span class="k">class</span> <span class="nc">ExampleClass</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

    <span class="k">def</span> <span class="nf">my_method</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">pass</span>


<span class="n">obj</span> <span class="o">=</span> <span class="nc">ExampleClass</span><span class="p">(</span><span class="sh">"</span><span class="s">TestObj</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">对象的实例属性:</span><span class="si">{</span><span class="n">obj</span><span class="p">.</span><span class="n">__dict__</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">对象所属的类:</span><span class="si">{</span><span class="n">obj</span><span class="p">.</span><span class="n">__class__</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">类的名称:</span><span class="si">{</span><span class="n">ExampleClass</span><span class="p">.</span><span class="n">__name__</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">类所在的模块:</span><span class="si">{</span><span class="n">ExampleClass</span><span class="p">.</span><span class="n">__module__</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">类的文档字符串:</span><span class="si">{</span><span class="n">ExampleClass</span><span class="p">.</span><span class="n">__doc__</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">类的直接基类:</span><span class="si">{</span><span class="n">ExampleClass</span><span class="p">.</span><span class="n">__bases__</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">类的MRO:</span><span class="si">{</span><span class="n">ExampleClass</span><span class="p">.</span><span class="n">__mro__</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://wechat01.oss-cn-hangzhou.aliyuncs.com/img/image-20250709000103726.png" alt="image-20250709000103726" style="zoom:50%;" /></p>



                <hr style="visibility: hidden;">
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2025/07/09/python%E5%9F%BA%E7%A1%8013%E7%B1%BB%E7%9A%84%E6%B5%85%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B7%B1%E6%8B%B7%E8%B4%9D/" data-toggle="tooltip" data-placement="top" title="python基础-类的浅拷贝和深拷贝">
                        Previous<br>
                        <span>python基础-类的浅拷贝和深拷贝</span>
                        </a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2025/07/09/python%E5%9F%BA%E7%A1%8013%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B(2)%E7%BB%83%E4%B9%A0/" data-toggle="tooltip" data-placement="top" title="python基础-面向对象编程(2)-练习">
                        Next<br>
                        <span>python基础-面向对象编程(2)-练习</span>
                        </a>
                    </li>
                    
                </ul>
                <hr style="visibility: hidden;">

                

                
            </div>  

    <!-- Side Catalog Container -->
        
            <div class="
                col-lg-2 col-lg-offset-0
                visible-lg-block
                sidebar-container
                catalog-container">
                <div class="side-catalog">
                    <hr class="hidden-sm hidden-xs">
                    <h5>
                        <a class="catalog-toggle" href="#">CATALOG</a>
                    </h5>
                    <ul class="catalog-body"></ul>
                </div>
            </div>
        

    <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                


<section>
    
        <hr class="hidden-sm hidden-xs">
    
    <h5><a href="/archive/">FEATURED TAGS</a></h5>
    <div class="tags">
        
        
        
        
        
        
                <a data-sort="0144" 
                    href="/archive/?tag=%E4%B9%A6%E7%B1%8D%E9%98%85%E8%AF%BB"
                    title="书籍阅读"
                    rel="3">书籍阅读</a>
        
                <a data-sort="0123" 
                    href="/archive/?tag=%E7%AE%97%E6%B3%95"
                    title="算法"
                    rel="24">算法</a>
        
                <a data-sort="0129" 
                    href="/archive/?tag=%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BDAI%E5%9F%BA%E7%A1%80"
                    title="人工智能AI基础"
                    rel="18">人工智能AI基础</a>
        
                <a data-sort="0130" 
                    href="/archive/?tag=python%E5%9F%BA%E7%A1%80"
                    title="python基础"
                    rel="17">python基础</a>
        
                <a data-sort="0134" 
                    href="/archive/?tag=numpy"
                    title="numpy"
                    rel="13">numpy</a>
        
                <a data-sort="0134" 
                    href="/archive/?tag=pandas"
                    title="pandas"
                    rel="13">pandas</a>
        
                <a data-sort="0135" 
                    href="/archive/?tag=%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-%E5%90%B4%E6%81%A9%E8%BE%BE"
                    title="机器学习-吴恩达"
                    rel="12">机器学习-吴恩达</a>
        
                <a data-sort="0137" 
                    href="/archive/?tag=%E5%8A%9B%E6%89%A3"
                    title="力扣"
                    rel="10">力扣</a>
        
                <a data-sort="0138" 
                    href="/archive/?tag=%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AE%97%E6%B3%95"
                    title="机器学习算法"
                    rel="9">机器学习算法</a>
        
                <a data-sort="0141" 
                    href="/archive/?tag=matplotlib"
                    title="matplotlib"
                    rel="6">matplotlib</a>
        
                <a data-sort="0144" 
                    href="/archive/?tag=spring6"
                    title="spring6"
                    rel="3">spring6</a>
        
                <a data-sort="0145" 
                    href="/archive/?tag=Java%E5%9F%BA%E7%A1%80"
                    title="Java基础"
                    rel="2">Java基础</a>
        
                <a data-sort="0145" 
                    href="/archive/?tag=ollama%E5%B7%A5%E5%85%B7"
                    title="ollama工具"
                    rel="2">ollama工具</a>
        
                <a data-sort="0145" 
                    href="/archive/?tag=python%E7%88%AC%E8%99%AB"
                    title="python爬虫"
                    rel="2">python爬虫</a>
    </div>
</section>


                <!-- Friends Blog -->
                
<hr>
<h5>FRIENDS</h5>
<ul class="list-inline">
  
  <li><a href="https://m.freebuf.com/">freebuf</a></li>
  
  <li><a href="https://xz.aliyun.com/">先知</a></li>
  
  <li><a href="https://www.sec-in.com/All">sec-in</a></li>
  
  <li><a href="https://paper.seebug.org/">see-bug</a></li>
  
  <li><a href="https://twitter.com/Concurr21486093">我的推特</a></li>
  
  <li><a href="https://pdai.tech/">pdai</a></li>
  
  <li><a href="https://nodejs.org/dist/">nodejs index of dist</a></li>
  
  <li><a href="#">公众号：小东方不败</a></li>
  
</ul>

            </div>
        </div>
    </div>
</article>

<!-- add support for mathjax by voleking-->









<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("//cdnjs.cloudflare.com/ajax/libs/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'right',
          // icon: '#'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <!-- SNS Link -->
                


<ul class="list-inline text-center">


  
  
  <li>
    <a href="https://twitter.com/Concurr21486093">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
  <li>
    <a target="_blank" href="https://www.zhihu.com/people/Hilda">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa  fa-stack-1x fa-inverse">知</i>
      </span>
    </a>
  </li>
  
  
  
  
  <li>
    <a target="_blank" href="https://github.com/kirsten-1">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-github fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
</ul>

                <p class="copyright text-muted">
                    Copyright &copy; Hilda 2025
                    <br>
                    Powered by <a href="https://kirsten-1.github.io/">hilda Blog</a>
<!--                    <iframe style="margin-left: 2px; margin-bottom:-5px;" frameborder="0" scrolling="0" width="100px"-->
<!--                        height="20px"-->
<!--                        src="https://ghbtns.com/github-btn.html?user=huxpro&repo=huxpro.github.io&type=star&count=true">-->
<!--                    </iframe>-->
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<!-- Currently, only navbar scroll-down effect at desktop still depends on this -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js "></script>

<!-- Simple Jekyll Search -->
<script src="/js/simple-jekyll-search.min.js"></script>

<!-- Service Worker -->

<script src="/js/snackbar.js "></script>
<script src="/js/sw-registration.js "></script>


<!-- async load function -->
<script>
    function async(u, c) {
        var d = document, t = 'script',
            o = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        o.src = u;
        if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
        s.parentNode.insertBefore(o, s);
    }
</script>

<!--
     Because of the native support for backtick-style fenced code blocks
     right within the Markdown is landed in Github Pages,
     From V1.6, There is no need for Highlight.js,
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/
     - https://github.com/jneen/rouge/wiki/list-of-supported-languages-and-lexers
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->







<!--fastClick.js -->
<script>
    async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function () {
        var $nav = document.querySelector("nav");
        if ($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->



<!-- Baidu Tongji -->



<!-- Side Catalog -->

<script type="text/javascript">
    function generateCatalog(selector) {

        // interop with multilangual 
        if ('' == 'true') {
            _containerSelector = 'div.post-container.active'
        } else {
            _containerSelector = 'div.post-container'
        }

        // init
        var P = $(_containerSelector), a, n, t, l, i, c;
        a = P.find('h1,h2,h3,h4,h5,h6');

        // clean
        $(selector).html('')

        // appending
        a.each(function () {
            n = $(this).prop('tagName').toLowerCase();
            i = "#" + $(this).prop('id');
            t = $(this).text();
            c = $('<a href="' + i + '" rel="nofollow">' + t + '</a>');
            l = $('<li class="' + n + '_nav"></li>').append(c);
            $(selector).append(l);
        });
        return true;
    }

    generateCatalog(".catalog-body");

    // toggle side catalog
    $(".catalog-toggle").click((function (e) {
        e.preventDefault();
        $('.side-catalog').toggleClass("fold")
    }))

    /*
     * Doc: https://github.com/davist11/jQuery-One-Page-Nav
     * Fork by Hux to support padding
     */
    async("/js/jquery.nav.js", function () {
        $('.catalog-body').onePageNav({
            currentClass: "active",
            changeHash: !1,
            easing: "swing",
            filter: "",
            scrollSpeed: 700,
            scrollOffset: 0,
            scrollThreshold: .2,
            begin: null,
            end: null,
            scrollChange: null,
            padding: 80
        });
    });
</script>



<!-- Multi-Lingual -->


<!-- Simple Jekyll Search -->
<script>
    // https://stackoverflow.com/questions/1912501/unescape-html-entities-in-javascript
    function htmlDecode(input) {
        var e = document.createElement('textarea');
        e.innerHTML = input;
        // handle case of empty input
        return e.childNodes.length === 0 ? "" : e.childNodes[0].nodeValue;
    }

    SimpleJekyllSearch({
        searchInput: document.getElementById('search-input'),
        resultsContainer: document.getElementById('search-results'),
        json: '/search.json',
        searchResultTemplate: '<div class="post-preview item"><a href="{url}"><h2 class="post-title">{title}</h2><h3 class="post-subtitle">{subtitle}</h3><hr></a></div>',
        noResultsText: 'No results',
        limit: 50,
        fuzzy: false,
        // a hack to get escaped subtitle unescaped. for some reason, 
        // post.subtitle w/o escape filter nuke entire search.
        templateMiddleware: function (prop, value, template) {
            if (prop === 'subtitle' || prop === 'title') {
                if (value.indexOf("code")) {
                    return htmlDecode(value);
                } else {
                    return value;
                }
            }
        }
    });

    $(document).ready(function () {
        var $searchPage = $('.search-page');
        var $searchOpen = $('.search-icon');
        var $searchClose = $('.search-icon-close');
        var $searchInput = $('#search-input');
        var $body = $('body');

        $searchOpen.on('click', function (e) {
            e.preventDefault();
            $searchPage.toggleClass('search-active');
            var prevClasses = $body.attr('class') || '';
            setTimeout(function () {
                $body.addClass('no-scroll');
            }, 400)

            if ($searchPage.hasClass('search-active')) {
                $searchClose.on('click', function (e) {
                    e.preventDefault();
                    $searchPage.removeClass('search-active');
                    $body.attr('class', prevClasses);  // from closure 
                });
                $searchInput.focus();
            }
        });
    });
</script>


<!-- Image to hack wechat -->
<img src="/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
